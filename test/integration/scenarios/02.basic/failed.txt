MIT License

Copyright (c) Microsoft Corporation.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE

{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:98","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- launching COA host ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.046254491Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"warning","msg":"failed to parse shutdownGracePeriod '' from config, using default '30s'","scope":"coa.runtime","time":"2025-01-16T02:04:24.046288517Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Init:83","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init global memoryKeyLock","scope":"coa.runtime","time":"2025-01-16T02:04:24.047660294Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLock).Init:54","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Init MemoryKeyLock","scope":"coa.runtime","time":"2025-01-16T02:04:24.047682433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.GetApiClient:66","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Creating the symphony base url apiclient.","scope":"coa.runtime","time":"2025-01-16T02:04:24.047716953Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/secret.(*K8sSecretProvider).Init:86","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s Secret): initialize","scope":"providers.secret.k8s","time":"2025-01-16T02:04:24.047813586Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.settings): initialize at route ''","scope":"coa.runtime","time":"2025-01-16T02:04:24.047994543Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/configs.(*ConfigsManager).Init:34","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Config): Init","scope":"coa.runtime","time":"2025-01-16T02:04:24.048018718Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (config-manager): initalize manager type 'managers.symphony.configs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.04802737Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/secrets.(*SecretsManager).Init:34","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Secret): Init","scope":"coa.runtime","time":"2025-01-16T02:04:24.048035065Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (secret-manager): initalize manager type 'managers.symphony.secrets'","scope":"coa.runtime","time":"2025-01-16T02:04:24.048047433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SettingsVendor).Init:51","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (Settings): found config provider","scope":"coa.runtime","time":"2025-01-16T02:04:24.048056372Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SettingsVendor).Init:55","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (Settings): found secret provider","scope":"coa.runtime","time":"2025-01-16T02:04:24.048069883Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.048082283Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.04813307Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.stage): initialize at route 'stage'","scope":"coa.runtime","time":"2025-01-16T02:04:24.048176247Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (stage-manager): initalize manager type 'managers.symphony.stage'","scope":"coa.runtime","time":"2025-01-16T02:04:24.048195976Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (campaigns-manager): initalize manager type 'managers.symphony.campaigns'","scope":"coa.runtime","time":"2025-01-16T02:04:24.048206577Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (activations-manager): initalize manager type 'managers.symphony.activations'","scope":"coa.runtime","time":"2025-01-16T02:04:24.048219947Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic activation with Group 0","scope":"coa.runtime","time":"2025-01-16T02:04:24.04823134Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic trigger with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.054549757Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic job-report with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.061514685Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic remote-job with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.065292359Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.068690359Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.activations): initialize at route 'activations'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068809167Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (activations-manager): initalize manager type 'managers.symphony.activations'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068830262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.068840559Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.backgroundjob): initialize at route 'backgroundjob'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068868368Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (activations-cleanup-manager): initalize manager type 'managers.symphony.activationscleanup'","scope":"coa.runtime","time":"2025-01-16T02:04:24.06887994Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/activations.(*ActivationsCleanupManager).Init:49","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"M (Activation Cleanup): Initialize RetentionDuration as 4320h0m0s","scope":"coa.runtime","time":"2025-01-16T02:04:24.068888023Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*BackgroundJobVendor).Init:48","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"ActivationsCleanupManager is enabled","scope":"coa.runtime","time":"2025-01-16T02:04:24.068894676Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.068900455Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.campaigns): initialize at route 'campaigns'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068932221Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (campaigns-manager): initalize manager type 'managers.symphony.campaigns'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068953882Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.068961314Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.campaigncontainers): initialize at route 'campaigncontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068985966Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (campaign-container-manager): initalize manager type 'managers.symphony.campaigncontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.068999701Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.echo): initialize at route 'greetings'","scope":"coa.runtime","time":"2025-01-16T02:04:24.06900983Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic trace with Group echo","scope":"coa.runtime","time":"2025-01-16T02:04:24.069017258Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Init:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): Successfully launch redis state provider","scope":"coa.runtime","time":"2025-01-16T02:04:24.073203553Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.jobs): initialize at route 'jobs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.073232452Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (jobs-manager): initalize manager type 'managers.symphony.jobs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.073258825Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic trace with Group job","scope":"coa.runtime","time":"2025-01-16T02:04:24.07328442Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic job with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.076593583Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic heartbeat with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.080529009Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic schedule with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.084502675Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.087765887Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.targets): initialize at route 'targets'","scope":"coa.runtime","time":"2025-01-16T02:04:24.087865776Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (targets-manager): initalize manager type 'managers.symphony.targets'","scope":"coa.runtime","time":"2025-01-16T02:04:24.087884971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.087894486Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.solutions): initialize at route 'solutions'","scope":"coa.runtime","time":"2025-01-16T02:04:24.087927196Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (solutions-manager): initalize manager type 'managers.symphony.solutions'","scope":"coa.runtime","time":"2025-01-16T02:04:24.08794241Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.087950614Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.solutioncontainers): initialize at route 'solutioncontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.087997493Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (solution-container-manager): initalize manager type 'managers.symphony.solutioncontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.08801254Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.088019148Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.instances): initialize at route 'instances'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088049481Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (instances-manager): initalize manager type 'managers.symphony.instances'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088065504Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.088072786Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.devices): initialize at route 'devices'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088098578Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (devices-manager): initalize manager type 'managers.symphony.devices'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088111759Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.088117524Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.models): initialize at route 'models'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088139246Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.088152771Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.skills): initialize at route 'skills'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088178217Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.users): initialize at route 'users'","scope":"coa.runtime","time":"2025-01-16T02:04:24.088194474Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/users.(*UsersManager).UpsertUser:80","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Users): UpsertUser name admin","scope":"coa.runtime","time":"2025-01-16T02:04:24.088205793Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states admin in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.088244893Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/users.(*UsersManager).UpsertUser:80","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Users): UpsertUser name reader","scope":"coa.runtime","time":"2025-01-16T02:04:24.08825638Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states reader in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.088263311Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/users.(*UsersManager).UpsertUser:80","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Users): UpsertUser name developer","scope":"coa.runtime","time":"2025-01-16T02:04:24.088284146Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states developer in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.088299435Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/users.(*UsersManager).UpsertUser:80","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Users): UpsertUser name device-manager","scope":"coa.runtime","time":"2025-01-16T02:04:24.088307047Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states device-manager in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.088323987Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/users.(*UsersManager).UpsertUser:80","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Users): UpsertUser name operator","scope":"coa.runtime","time":"2025-01-16T02:04:24.088345603Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states operator in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.088354339Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Init:92","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init shared memoryKeyLock","scope":"coa.runtime","time":"2025-01-16T02:04:24.088852663Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Init:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): Successfully launch redis state provider","scope":"coa.runtime","time":"2025-01-16T02:04:24.089423667Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.solution): initialize at route 'solution'","scope":"coa.runtime","time":"2025-01-16T02:04:24.089445844Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (staging-manager): initalize manager type 'managers.symphony.staging'","scope":"coa.runtime","time":"2025-01-16T02:04:24.089455915Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Init:43","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" config is %+v providers is %+v {staging-manager managers.symphony.staging map[interval:#15 poll.enabled:true providers.queue:redis-queue providers.volatilestate:memory-state] map[memory-state:{providers.state.memory map[]} redis-queue:{providers.queue.redis map[host:symphony-redis:6379 name:redis password: requireTLS:false]}]} map[memory-state:0xc00079e340 redis-queue:0xc000866ba0]","scope":"coa.runtime","time":"2025-01-16T02:04:24.089476927Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (stage-manager): initalize manager type 'managers.symphony.stage'","scope":"coa.runtime","time":"2025-01-16T02:04:24.089496165Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (solution-manager): initalize manager type 'managers.symphony.solution'","scope":"coa.runtime","time":"2025-01-16T02:04:24.089512689Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).Init:87","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" key is %smem-keylock","scope":"coa.runtime","time":"2025-01-16T02:04:24.089519397Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).Init:87","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" key is %smock-config","scope":"coa.runtime","time":"2025-01-16T02:04:24.089531422Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).Init:87","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" key is %smock-secret","scope":"coa.runtime","time":"2025-01-16T02:04:24.089535761Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).Init:87","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" key is %sredis-state","scope":"coa.runtime","time":"2025-01-16T02:04:24.089539895Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic deployment-step with Group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:04:24.08955745Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic deployment-plan with Group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:04:24.092671596Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic step-result with Group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:04:24.095931759Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.agent): initialize at route 'agent'","scope":"coa.runtime","time":"2025-01-16T02:04:24.099394456Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (reference-manager): initalize manager type 'managers.symphony.reference'","scope":"coa.runtime","time":"2025-01-16T02:04:24.099425829Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.099446862Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.099489092Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.federation): initialize at route 'federation'","scope":"coa.runtime","time":"2025-01-16T02:04:24.100056945Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (trails-manager): initalize manager type 'managers.symphony.trails'","scope":"coa.runtime","time":"2025-01-16T02:04:24.10007634Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (sites-manager): initalize manager type 'managers.symphony.sites'","scope":"coa.runtime","time":"2025-01-16T02:04:24.100083936Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (catalogs-manager): initalize manager type 'managers.symphony.catalogs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.100092963Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (staging-manager): initalize manager type 'managers.symphony.staging'","scope":"coa.runtime","time":"2025-01-16T02:04:24.100101973Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Init:43","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" config is %+v providers is %+v {staging-manager managers.symphony.staging map[interval:#15 poll.enabled:true providers.queue:redis-queue providers.volatilestate:memory-state] map[memory-state:{providers.state.memory map[]} redis-queue:{providers.queue.redis map[host:symphony-redis:6379 name:redis password: requireTLS:false]}]} map[memory-state:0xc000478f40 redis-queue:0xc000945bf0]","scope":"coa.runtime","time":"2025-01-16T02:04:24.100123406Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (sync-manager): initalize manager type 'managers.symphony.sync'","scope":"coa.runtime","time":"2025-01-16T02:04:24.100139509Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic catalog with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.100147322Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic remote with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.103314663Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic report with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.106647118Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic trail with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.109898321Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Get:495","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s State): get state hq in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.113566823Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Get:516","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (K8s State) Not Found: failed to get object (caused by: sites.federation.symphony \"hq\" not found)","scope":"coa.runtime","time":"2025-01-16T02:04:24.11636738Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/sites.(*SitesManager).UpsertState:177","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"UpsertState: Upsert site state hq","scope":"coa.runtime","time":"2025-01-16T02:04:24.116433129Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Get:495","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s State): get state hq in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.11645224Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Get:516","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (K8s State) Not Found: failed to get object (caused by: sites.federation.symphony \"hq\" not found)","scope":"coa.runtime","time":"2025-01-16T02:04:24.117341714Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Upsert:187","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): upsert state hq in namespace default","scope":"coa.runtime","time":"2025-01-16T02:04:24.117389068Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.122063624Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.catalogs): initialize at route 'catalogs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.122154163Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (catalogs-manager): initalize manager type 'managers.symphony.catalogs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.122177871Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Subscribe:184","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : subscribing to topic catalog-sync with Group ","scope":"coa.runtime","time":"2025-01-16T02:04:24.122195289Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.125374912Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.catalogcontainers): initialize at route 'catalogcontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.125446669Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (catalog-container-manager): initalize manager type 'managers.symphony.catalogcontainers'","scope":"coa.runtime","time":"2025-01-16T02:04:24.125465355Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/states/k8s.(*K8sStateProvider).Init:102","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s State): initialize","scope":"coa.runtime","time":"2025-01-16T02:04:24.125473804Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/vendors.(*Vendor).Init:109","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"V (vendors.visualization): initialize at route 'visualization'","scope":"coa.runtime","time":"2025-01-16T02:04:24.125506113Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/managers.(*Manager).Init:75","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (catalogs-manager): initalize manager type 'managers.symphony.catalogs'","scope":"coa.runtime","time":"2025-01-16T02:04:24.125521109Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:210","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context established ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125531044Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Settings ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125545152Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Stage ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125550322Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Activations ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125561916Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: BackgroundJob ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125566721Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Campaigns ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125579276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: CampaignContainers ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125585573Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Echo ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125590347Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Job ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125594442Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Targets ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125598358Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Solutions ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125602283Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: SolutionContainers ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125613716Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Instances ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125619251Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Devices ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125631029Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Models ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125635879Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Skills ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125647289Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Users ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125651698Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Solution ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125662971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Agent ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125667215Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Federation ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125673293Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Catalogs ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125684452Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: CatalogContainers ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125688883Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/host.(*APIHost).Launch:217","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"--- evaluation context is sent to vendor: Visualization ---","scope":"coa.runtime","time":"2025-01-16T02:04:24.125700254Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:04:39.126346654Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:04:39.126780484Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:04:54.125861166Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:04:54.126042555Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:09.126901159Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:09.12703345Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.697426206Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.697457436Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"fdc784ac-c62f-4039-a8cd-2f91257d5118","resourceId":"","traceContext":{"spanId":"fa43f63ad724d0d0","traceId":"cd36e436760d1627ed8a69a980fd1f80"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, target-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.698881564Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"fdc784ac-c62f-4039-a8cd-2f91257d5118","resourceId":"","traceContext":{"spanId":"7b987c08ed3e75e7","traceId":"cd36e436760d1627ed8a69a980fd1f80"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.698916542Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"fdc784ac-c62f-4039-a8cd-2f91257d5118","resourceId":"","traceContext":{"spanId":"85066103c6b135ca","traceId":"cd36e436760d1627ed8a69a980fd1f80"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.698930759Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:220","diagnostics":{"correlationId":"fdc784ac-c62f-4039-a8cd-2f91257d5118","resourceId":"","traceContext":{"spanId":"85066103c6b135ca","traceId":"cd36e436760d1627ed8a69a980fd1f80"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":" M (Solution): failed to get deployment summary[target-runtime-defaulttarget]: Not Found: state summary-target-runtime-defaulttarget not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.699111334Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:639","diagnostics":{"correlationId":"fdc784ac-c62f-4039-a8cd-2f91257d5118","resourceId":"","traceContext":{"spanId":"85066103c6b135ca","traceId":"cd36e436760d1627ed8a69a980fd1f80"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"V (Solution): onQueue failed - Not Found: state summary-target-runtime-defaulttarget not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.699238447Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.705504496Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.705531738Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"b2837c6587d4ab5b","traceId":"a30c47c8dd0a83d796633643d75e1654"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: POST, ","scope":"coa.runtime","time":"2025-01-16T02:05:15.706626519Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115707-0, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:05:15.710378362Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic job, group , messages 1736993115707-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.710418523Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic job","scope":"coa.runtime","time":"2025-01-16T02:05:15.710425661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115707-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:05:15.71046276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115707-0 for topic job","scope":"coa.runtime","time":"2025-01-16T02:05:15.710396944Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:425","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"cbeb95f38fab1158","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): handling job event objectType: deployment, job action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:05:15.710591268Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:274","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"7bc0d98e11fdd826","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): get state h_target-runtime-defaulttarget in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.710618102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:278","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"7bc0d98e11fdd826","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Memory State): failed to get h_target-runtime-defaulttarget state: Not Found: entry 'h_target-runtime-defaulttarget' is not found in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.710638638Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).DelayOrSkipJob:346","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"7bc0d98e11fdd826","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): heartbeat h_target-runtime-defaulttarget is not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.710684327Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:576","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"7bc0d98e11fdd826","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment job target-runtime-defaulttarget, action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:05:15.710722479Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:578","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"7bc0d98e11fdd826","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment spec: {\"solutionName\":\"target-runtime-defaulttarget\",\"solution\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"target-runtime-defaulttarget\"},\"spec\":{\"displayName\":\"target-runtime-defaulttarget\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}]}},\"instance\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"target-runtime-defaulttarget\"},\"spec\":{\"displayName\":\"target-runtime-defaulttarget\",\"scope\":\"defaultscope\",\"solution\":\"target-runtime-defaulttarget\",\"target\":{\"name\":\"defaulttarget\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"}},\"targets\":{\"defaulttarget\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaulttarget\",\"annotations\":{\"SummaryJobIdKey\":\"1\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"fabric.symphony/v1\\\",\\\"kind\\\":\\\"Target\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaulttarget\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"nginx\\\",\\\"properties\\\":{\\\"chart\\\":{\\\"name\\\":\\\"nginx\\\",\\\"repo\\\":\\\"https://charts.bitnami.com/bitnami\\\",\\\"version\\\":\\\"18.1.7\\\"}},\\\"type\\\":\\\"helm.v3\\\"}],\\\"displayName\\\":\\\"defaulttarget\\\",\\\"isDryRun\\\":true,\\\"scope\\\":\\\"defaultscope\\\",\\\"topologies\\\":[{\\\"bindings\\\":[{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.k8s\\\",\\\"role\\\":\\\"instance\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.helm\\\",\\\"role\\\":\\\"helm.v3\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.kubectl\\\",\\\"role\\\":\\\"yaml.k8s\\\"}]}]}}\\n\",\"management.azure.com/correlationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"management.azure.com/runningCorrelationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"target.fabric.symphony/started-at\":\"2025-01-16T02:05:15Z\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"},\"spec\":{\"displayName\":\"defaulttarget\",\"scope\":\"defaultscope\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}],\"topologies\":[{\"bindings\":[{\"role\":\"instance\",\"provider\":\"providers.target.k8s\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"helm.v3\",\"provider\":\"providers.target.helm\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"yaml.k8s\",\"provider\":\"providers.target.kubectl\",\"config\":{\"inCluster\":\"true\"}}]}]}}},\"assignments\":{\"defaulttarget\":\"{nginx}\"},\"generation\":\"1\",\"jobID\":\"1\",\"objectNamespace\":\"default\",\"hash\":\"d6b3b1259965035e165bcf5bb0d5103a\",\"isDryRun\":true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.710740079Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.712515803Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.712536902Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:761","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"c3b148648d6a7303","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onReconcile, method: POST","scope":"coa.runtime","time":"2025-01-16T02:05:15.713847663Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Lock:112","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init lock a memoryKeyLockdefault\u0026\u0026target-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.713980219Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:784","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"fc6aa940b421f433","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock succeed %sdefault\u0026\u0026target-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.713997276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:793","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"fc6aa940b421f433","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get deployment %+v{target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc0005906e0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc00062fe60 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d22300}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.714046387Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:794","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"fc6aa940b421f433","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): reconciling deployment.InstanceName: target-runtime-defaulttarget, deployment.SolutionName: target-runtime-defaulttarget, remove: false, namespace: default, targetName: , generation: 1, jobID: 1","scope":"coa.runtime","time":"2025-01-16T02:05:15.714067213Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"9c1f1cde6d0bc48a","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state target-runtime-defaulttarget with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.714084332Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"9c1f1cde6d0bc48a","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance target-runtime-defaulttarget in namespace default: Not Found: state target-runtime-defaulttarget not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.714262289Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"9c1f1cde6d0bc48a","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.714301529Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"23fa3adfc12b1410","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.714317278Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a545cb669d7482e8","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.714338449Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:220","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a545cb669d7482e8","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":" M (Solution): failed to get deployment summary[target-runtime-defaulttarget]: Not Found: state summary-target-runtime-defaulttarget not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.714445787Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.714508967Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.EvaluateDeployment:1340","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" (Parser): Evaluate deployment completed.","scope":"coa.runtime","time":"2025-01-16T02:05:15.718500325Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:886","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"publish topic for object %starget-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.718528343Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115718-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.721914082Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115718-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.721933769Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993115718-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.721944457Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.721954175Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115718-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.721986662Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"468fdcc287f408d6","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states d_target-runtime-defaulttarget in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.722071371Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.722095506Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.722198139Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026target-runtime-defaulttarget {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.722215293Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %se2a5a127-9e13-411b-bd1e-542c68e64da1","scope":"coa.runtime","time":"2025-01-16T02:05:15.722221975Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a9d4cbff9838406e","traceId":"1850919e46c60c1a5880a816616df8f5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.722243092Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"62924753ea9e587f","traceId":"18d4c734eb1faa5663d74096bfd0fc9b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.722264169Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"a91c919e1f64d06a","traceId":"18d4c734eb1faa5663d74096bfd0fc9b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.722275054Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115707-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:05:15.725334409Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message job, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.725363747Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"e31c244a05e30ba4","traceId":"088354fdbb86d7841150eaca233fbf20"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.725429831Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"e31c244a05e30ba4","traceId":"088354fdbb86d7841150eaca233fbf20"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000b8b4f0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000840b40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9e80}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.728563921Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"e31c244a05e30ba4","traceId":"088354fdbb86d7841150eaca233fbf20"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %se2a5a127-9e13-411b-bd1e-542c68e64da10","scope":"coa.runtime","time":"2025-01-16T02:05:15.728586082Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115728-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.732007367Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115728-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.732022447Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993115728-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.732048855Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.73206452Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115728-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.732105151Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"e31c244a05e30ba4","traceId":"088354fdbb86d7841150eaca233fbf20"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+ve2a5a127-9e13-411b-bd1e-542c68e64da1","scope":"coa.runtime","time":"2025-01-16T02:05:15.732027134Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"e31c244a05e30ba4","traceId":"088354fdbb86d7841150eaca233fbf20"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:15.732201487Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc0001f9b80}","scope":"coa.runtime","time":"2025-01-16T02:05:15.732347176Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:15.732367305Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.732372416Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %shelm.v3","scope":"coa.runtime","time":"2025-01-16T02:05:15.732378526Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:15.732383252Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).Init:156","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"af4d2e862ffabdc2","traceId":"70a0604e8129819a297a1588bc1471d9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Helm Target): Init()","scope":"providers.target.helm","time":"2025-01-16T02:05:15.732410677Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).createActionConfig:207","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Helm Target): creating action config for namespace default","scope":"providers.target.helm","time":"2025-01-16T02:05:15.732731151Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).Get:297","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"699caa556898d4fe","traceId":"eae67043b2440ab04964699e1f4298d6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Helm Target): getting artifacts: defaultscope - target-runtime-defaulttarget","scope":"providers.target.helm","time":"2025-01-16T02:05:15.732824794Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).createActionConfig:207","diagnostics":{"correlationId":"b5381708-599f-4a86-bcb6-27d45fbe815d","resourceId":"","traceContext":{"spanId":"699caa556898d4fe","traceId":"eae67043b2440ab04964699e1f4298d6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Helm Target): creating action config for namespace defaultscope","scope":"providers.target.helm","time":"2025-01-16T02:05:15.732842074Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115718-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.735344493Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.73537223Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115735-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.738495988Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993115735-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.738524694Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.738531227Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115735-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.738559092Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115735-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.738574329Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"e2a5a127-9e13-411b-bd1e-542c68e64da1\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:15.734840167Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:15.738618313Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 get 2025-01-16 02:05:15.722193103 +0000 UTC m=+51.688657002 0001-01-01 00:00:00 +0000 UTC 1 0 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000b8b4f0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000840b40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9e80}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]} {{ []  false} {  map[]} e2a5a127-9e13-411b-bd1e-542c68e64da1 0 2025-01-16 02:05:15.734840167 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:05:15.738694034Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.738721666Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026target-runtime-defaulttarget {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.738729506Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vget\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 get 2025-01-16 02:05:15.722193103 +0000 UTC m=+51.688657002 0001-01-01 00:00:00 +0000 UTC 1 1 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000b8b4f0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000840b40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9e80}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.738764976Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:15.738783453Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleGetPlanCompletetion:343","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to get current state %v\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 get 2025-01-16 02:05:15.722193103 +0000 UTC m=+51.688657002 0001-01-01 00:00:00 +0000 UTC 1 1 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000b8b4f0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000840b40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9e80}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.738803957Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1285","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Compute current state %v for Plan ID: %s{[] [] map[]}e2a5a127-9e13-411b-bd1e-542c68e64da1","scope":"coa.runtime","time":"2025-01-16T02:05:15.738815048Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state target-runtime-defaulttarget with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.738827812Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115728-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.741658032Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.741684857Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance target-runtime-defaulttarget in namespace default: Not Found: state target-runtime-defaulttarget not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.741726155Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1288","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get previous desired state %+v\u003cnil\u003e","scope":"coa.runtime","time":"2025-01-16T02:05:15.741751005Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1296","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get current desired state %+v{[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.741785045Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1301","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get desired state %+v{[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.741816924Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1309","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get merged state %+v{[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.741832273Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to publish topic to deployment plan %v merged state %v get plan %v\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 get 2025-01-16 02:05:15.722193103 +0000 UTC m=+51.688657002 0001-01-01 00:00:00 +0000 UTC 1 1 {1 0 0 0 map[]  1 false false true} {[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000b8b4f0} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000840b40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9e80}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]} {[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]} {[{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.741888232Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115742-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.745164694Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993115742-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.745186466Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115742-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.745189915Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.745203022Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115742-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.745235855Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.745341711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.745491386Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026target-runtime-defaulttarget {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.745509633Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %se2a5a127-9e13-411b-bd1e-542c68e64da1","scope":"coa.runtime","time":"2025-01-16T02:05:15.745516102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"4b08fd71b46bf130","traceId":"4e55ae2226a530345ec03b0313f965de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.745527471Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"21afa36d0330774b","traceId":"e42bbab498a4cf56d267113b80112903"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.745548501Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"63a40ac2f109583a","traceId":"e42bbab498a4cf56d267113b80112903"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.745570804Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115735-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.749839764Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.749871044Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"acc4f5c6e938264f","traceId":"f2343d581877c6f8573deb28054f4cbf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.749959334Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:184","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"acc4f5c6e938264f","traceId":"f2343d581877c6f8573deb28054f4cbf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v0helm.v3","scope":"coa.runtime","time":"2025-01-16T02:05:15.754380412Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"acc4f5c6e938264f","traceId":"f2343d581877c6f8573deb28054f4cbf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %se2a5a127-9e13-411b-bd1e-542c68e64da10","scope":"coa.runtime","time":"2025-01-16T02:05:15.754403239Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115754-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.757779937Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993115754-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.757798235Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.757825801Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115754-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.757802424Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"acc4f5c6e938264f","traceId":"f2343d581877c6f8573deb28054f4cbf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+ve2a5a127-9e13-411b-bd1e-542c68e64da1","scope":"coa.runtime","time":"2025-01-16T02:05:15.757854316Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115754-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.757867588Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"acc4f5c6e938264f","traceId":"f2343d581877c6f8573deb28054f4cbf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:15.758005212Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000639d00}","scope":"coa.runtime","time":"2025-01-16T02:05:15.75815278Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:15.758170422Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.758175739Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %shelm.v3","scope":"coa.runtime","time":"2025-01-16T02:05:15.758181721Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:15.75818796Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).Init:156","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a419a2169b4ec696","traceId":"44811c02ce4cce322521f8b23221f8d7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Helm Target): Init()","scope":"providers.target.helm","time":"2025-01-16T02:05:15.7582007Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).createActionConfig:207","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Helm Target): creating action config for namespace default","scope":"providers.target.helm","time":"2025-01-16T02:05:15.758227599Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).Apply:421","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"bf4510b70f251487","traceId":"7f7cb2a6793d2a95968b9607b282dd1c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Helm Target): applying artifacts: defaultscope - target-runtime-defaulttarget","scope":"providers.target.helm","time":"2025-01-16T02:05:15.758256164Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/helm.(*HelmTargetProvider).Apply:450","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"bf4510b70f251487","traceId":"7f7cb2a6793d2a95968b9607b282dd1c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Helm Target): dryRun is enabled, skipping apply","scope":"providers.target.helm","time":"2025-01-16T02:05:15.758276937Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115742-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.760944788Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.760972301Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115760-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.763912284Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993115760-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.763930566Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115760-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.763936121Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.763944936Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115760-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.763980728Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"e2a5a127-9e13-411b-bd1e-542c68e64da1\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:15.758288965Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:15.76401584Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 apply 2025-01-16 02:05:15.745470986 +0000 UTC m=+51.711934886 0001-01-01 00:00:00 +0000 UTC 1 0 {1 0 1 0 map[]  1 false false true} {[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc0005dcb90} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000d02090 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51800}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]} {{ []  false} {  map[]} e2a5a127-9e13-411b-bd1e-542c68e64da1 0 2025-01-16 02:05:15.758288965 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:05:15.76408298Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.764094902Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026target-runtime-defaulttarget {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.764103709Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.764109818Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %starget-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.764116733Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:15.764125169Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"741a3ff45b7f0e20","traceId":"85e1ba562b18c589b6a90a3020ac9c9a"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.76413577Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6ad8720569c50233","traceId":"85e1ba562b18c589b6a90a3020ac9c9a"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.764144837Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115754-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.76726498Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.767287997Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"1e8c5ce22fcb2888","traceId":"5eb09238e71f5652b673e622c2c137dd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.767335843Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"1e8c5ce22fcb2888","traceId":"5eb09238e71f5652b673e622c2c137dd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vapply\u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 apply 2025-01-16 02:05:15.745470986 +0000 UTC m=+51.711934886 0001-01-01 00:00:00 +0000 UTC 1 1 {1 1 1 0 map[defaulttarget:{OK  map[]}]  1 false false true} {[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc0005dcb90} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000d02090 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51800}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.770498008Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"1e8c5ce22fcb2888","traceId":"5eb09238e71f5652b673e622c2c137dd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:15.77052679Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1329","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"1e8c5ce22fcb2888","traceId":"5eb09238e71f5652b673e622c2c137dd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"handle plan completetion:begin to handle plan completetion \u0026{ e2a5a127-9e13-411b-bd1e-542c68e64da1 apply 2025-01-16 02:05:15.745470986 +0000 UTC m=+51.711934886 0001-01-01 00:00:00 +0000 UTC 1 1 {1 1 1 0 map[defaulttarget:{OK  map[]}]  1 false false true} {[{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[nginx::defaulttarget:helm.v3]} {target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc0005dcb90} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000d02090 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51800}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] }] [{defaulttarget [{update {nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}}] helm.v3 true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.770562758Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"1e8c5ce22fcb2888","traceId":"5eb09238e71f5652b673e622c2c137dd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=2), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:15.77058181Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"15ddd27f467a2578","traceId":"2f20988a97aa8e19ddfe2dc89c37745b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.770595632Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b7af611fa3e61421","traceId":"2f20988a97aa8e19ddfe2dc89c37745b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.770615202Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"3a6ad95d8c425923","traceId":"2837addb86e891d17f1b7230b8d0abf1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.770761708Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1334","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"3a6ad95d8c425923","traceId":"2837addb86e891d17f1b7230b8d0abf1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %starget-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.773931828Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1336","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"3a6ad95d8c425923","traceId":"2837addb86e891d17f1b7230b8d0abf1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"if it is dry run %+vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:15.773959754Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1337","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"3a6ad95d8c425923","traceId":"2837addb86e891d17f1b7230b8d0abf1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get dep %+v{target-runtime-defaulttarget {{default target-runtime-defaulttarget  0 map[] map[]} 0xc0005dcb90} {{default target-runtime-defaulttarget  0 map[] map[]} 0xc000d02090 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51800}] [] map[defaulttarget:{nginx}] 0 0  1 1 default d6b3b1259965035e165bcf5bb0d5103a true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.773985372Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"3a6ad95d8c425923","traceId":"2837addb86e891d17f1b7230b8d0abf1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: target-runtime-defaulttarget, state: %!s(model.SummaryState=2), namespace: default, jobid: 1, hash d6b3b1259965035e165bcf5bb0d5103a, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:15.774010965Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"269532d646ea7b5e","traceId":"6c18f766cd3b091d2fd036a19d42bfe8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.774034459Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"25654d40f8980105","traceId":"6c18f766cd3b091d2fd036a19d42bfe8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.774046671Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c33fab9e6f78ae4e","traceId":"067e5079996d98a3dd42e5cb0bdbddac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.774198758Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1374","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c33fab9e6f78ae4e","traceId":"067e5079996d98a3dd42e5cb0bdbddac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"final unlock %starget-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.777349598Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.777375918Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026target-runtime-defaulttarget {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.777386072Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).UnlockObject:1321","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c33fab9e6f78ae4e","traceId":"067e5079996d98a3dd42e5cb0bdbddac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"unlock %sdefault\u0026\u0026target-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.777391719Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115760-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.780482007Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:05:15.780520403Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.917447221Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.917476123Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"949ddef0-d588-4ead-89fd-7e49e60dc417","resourceId":"","traceContext":{"spanId":"b8bfd651713afaf1","traceId":"f5e2b3a474bf6738ca618b5b363f9afc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.918419796Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"949ddef0-d588-4ead-89fd-7e49e60dc417","resourceId":"","traceContext":{"spanId":"764090cc25f448b9","traceId":"f5e2b3a474bf6738ca618b5b363f9afc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.918450527Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"949ddef0-d588-4ead-89fd-7e49e60dc417","resourceId":"","traceContext":{"spanId":"9db0827fd64752f8","traceId":"f5e2b3a474bf6738ca618b5b363f9afc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.918463009Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:220","diagnostics":{"correlationId":"949ddef0-d588-4ead-89fd-7e49e60dc417","resourceId":"","traceContext":{"spanId":"9db0827fd64752f8","traceId":"f5e2b3a474bf6738ca618b5b363f9afc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":" M (Solution): failed to get deployment summary[defaultinstance]: Not Found: state summary-defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.918615262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:639","diagnostics":{"correlationId":"949ddef0-d588-4ead-89fd-7e49e60dc417","resourceId":"","traceContext":{"spanId":"9db0827fd64752f8","traceId":"f5e2b3a474bf6738ca618b5b363f9afc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"V (Solution): onQueue failed - Not Found: state summary-defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.91868489Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.925108343Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.925130895Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"33147fd90587ee1e","traceId":"c9f6c26800b6be19342c924ffd1df2db"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: POST, ","scope":"coa.runtime","time":"2025-01-16T02:05:15.926532971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115926-0, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:05:15.930124825Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic job, group , messages 1736993115926-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.93014443Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115926-0 for topic job","scope":"coa.runtime","time":"2025-01-16T02:05:15.930149908Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115926-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:05:15.930162605Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic job","scope":"coa.runtime","time":"2025-01-16T02:05:15.930159216Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:425","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"2f864b71620ff80d","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): handling job event objectType: deployment, job action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:05:15.930286938Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:274","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"cc193b7a714add8c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): get state h_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.930310054Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:290","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"cc193b7a714add8c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Memory State): failed to get h_defaultinstance state: Not Found: entry 'h_defaultinstance' is not found in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.930321791Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).DelayOrSkipJob:346","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"cc193b7a714add8c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): heartbeat h_defaultinstance is not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.930358933Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:576","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"cc193b7a714add8c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment job defaultinstance, action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:05:15.930388237Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:578","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"cc193b7a714add8c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment spec: {\"solutionName\":\"defaultsolution-v-v1\",\"solution\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultsolution-v-v1\",\"labels\":{\"rootResource\":\"defaultsolution\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Solution\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultsolution-v-v1\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"sample-prometheus-server\\\",\\\"properties\\\":{\\\"container.image\\\":\\\"prom/prometheus\\\",\\\"container.imagePullPolicy\\\":\\\"Always\\\",\\\"container.ports\\\":\\\"[{\\\\\\\"containerPort\\\\\\\":9090,\\\\\\\"protocol\\\\\\\":\\\\\\\"TCP\\\\\\\"}]\\\",\\\"container.resources\\\":\\\"{\\\\\\\"requests\\\\\\\":{\\\\\\\"cpu\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"memory\\\\\\\":\\\\\\\"100Mi\\\\\\\"}}\\\"},\\\"type\\\":\\\"container\\\"},{\\\"name\\\":\\\"conditional-activation-deployment\\\",\\\"properties\\\":{\\\"resource\\\":{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"labels\\\":{\\\"application\\\":\\\"testapp\\\",\\\"version\\\":\\\"1\\\"},\\\"name\\\":\\\"testapp\\\"},\\\"spec\\\":{\\\"replicas\\\":1,\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"command\\\":[\\\"/bin/sleep\\\",\\\"10000\\\"],\\\"image\\\":\\\"k8s.gcr.io/e2e-test-images/busybox:1.29\\\",\\\"name\\\":\\\"busybox\\\"}],\\\"nodeSelector\\\":{\\\"kubernetes.io/os\\\":\\\"linux\\\"},\\\"volumes\\\":[{\\\"configMap\\\":{\\\"name\\\":\\\"conditional-activation-config\\\"},\\\"name\\\":\\\"config\\\"}]}}}}},\\\"type\\\":\\\"yaml.k8s\\\"}],\\\"displayName\\\":\\\"defaultsolution-v-v1\\\",\\\"rootResource\\\":\\\"defaultsolution\\\"}}\\n\"}},\"spec\":{\"displayName\":\"defaultsolution-v-v1\",\"components\":[{\"name\":\"sample-prometheus-server\",\"type\":\"container\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"}},{\"name\":\"conditional-activation-deployment\",\"type\":\"yaml.k8s\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}}}]}},\"instance\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultinstance\",\"labels\":{\"solution\":\"defaultsolution-v-v1\",\"target\":\"defaulttarget\"},\"annotations\":{\"SummaryJobIdKey\":\"1\",\"instance.solution.symphony/started-at\":\"2025-01-16T02:05:15Z\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Instance\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultinstance\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"displayName\\\":\\\"defaultinstance\\\",\\\"isDryRun\\\":true,\\\"reconciliationPolicy\\\":{\\\"interval\\\":\\\"3m\\\",\\\"state\\\":\\\"active\\\"},\\\"scope\\\":\\\"defaultscope\\\",\\\"solution\\\":\\\"defaultsolution:v1\\\",\\\"target\\\":{\\\"name\\\":\\\"defaulttarget\\\"}}}\\n\",\"management.azure.com/correlationId\":\"18ad7715-fb4a-4b72-a01e-d65faa323c13\",\"management.azure.com/runningCorrelationId\":\"18ad7715-fb4a-4b72-a01e-d65faa323c13\"}},\"spec\":{\"displayName\":\"defaultinstance\",\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"}},\"targets\":{\"defaulttarget\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaulttarget\",\"annotations\":{\"SummaryJobIdKey\":\"1\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"fabric.symphony/v1\\\",\\\"kind\\\":\\\"Target\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaulttarget\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"nginx\\\",\\\"properties\\\":{\\\"chart\\\":{\\\"name\\\":\\\"nginx\\\",\\\"repo\\\":\\\"https://charts.bitnami.com/bitnami\\\",\\\"version\\\":\\\"18.1.7\\\"}},\\\"type\\\":\\\"helm.v3\\\"}],\\\"displayName\\\":\\\"defaulttarget\\\",\\\"isDryRun\\\":true,\\\"scope\\\":\\\"defaultscope\\\",\\\"topologies\\\":[{\\\"bindings\\\":[{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.k8s\\\",\\\"role\\\":\\\"instance\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.helm\\\",\\\"role\\\":\\\"helm.v3\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.kubectl\\\",\\\"role\\\":\\\"yaml.k8s\\\"}]}]}}\\n\",\"management.azure.com/correlationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"management.azure.com/runningCorrelationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"target.fabric.symphony/started-at\":\"2025-01-16T02:05:15Z\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"},\"spec\":{\"displayName\":\"defaulttarget\",\"scope\":\"defaultscope\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}],\"topologies\":[{\"bindings\":[{\"role\":\"instance\",\"provider\":\"providers.target.k8s\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"helm.v3\",\"provider\":\"providers.target.helm\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"yaml.k8s\",\"provider\":\"providers.target.kubectl\",\"config\":{\"inCluster\":\"true\"}}]}]}}},\"assignments\":{\"defaulttarget\":\"{sample-prometheus-server}{conditional-activation-deployment}\"},\"generation\":\"1\",\"jobID\":\"1\",\"objectNamespace\":\"default\",\"hash\":\"1760ee01b198a8ca24a21518b3dd4775\",\"isDryRun\":true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.930400644Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:15.930718773Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:15.930738222Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:761","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"220bb452162bbf7c","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onReconcile, method: POST","scope":"coa.runtime","time":"2025-01-16T02:05:15.931632553Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Lock:112","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init lock a memoryKeyLockdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.93176765Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:784","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"65c76c1d68efcc60","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock succeed %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.93178358Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:793","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"65c76c1d68efcc60","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008b0630 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444200}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.93181154Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:794","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"65c76c1d68efcc60","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): reconciling deployment.InstanceName: defaultinstance, deployment.SolutionName: defaultsolution-v-v1, remove: false, namespace: default, targetName: , generation: 1, jobID: 1","scope":"coa.runtime","time":"2025-01-16T02:05:15.931834779Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"394f278da403bb15","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.9318481Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"394f278da403bb15","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.931975309Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"394f278da403bb15","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.932005932Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"530bcba44ae9bf7b","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.932017945Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"e22f19b502e1a796","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.932035619Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:220","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"e22f19b502e1a796","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":" M (Solution): failed to get deployment summary[defaultinstance]: Not Found: state summary-defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.932137032Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.932176054Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.EvaluateDeployment:1340","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" (Parser): Evaluate deployment completed.","scope":"coa.runtime","time":"2025-01-16T02:05:15.936430064Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:886","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"publish topic for object %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.93645764Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115936-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.939943122Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115936-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.939975931Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993115936-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.9399876Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.940004291Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"dfc9a325c24f9691","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states d_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:05:15.940037682Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115936-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.940039692Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.940223039Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.940395916Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:15.940412694Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.940418085Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s28cf62e2-bc87-4bb2-ac5d-644227d3f012","scope":"coa.runtime","time":"2025-01-16T02:05:15.940423677Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"a4aa75743142a07e","traceId":"5578409780c42980819f946db3e7952e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.940432768Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"09ba2a5b9969d3bc","traceId":"a67a22e7fab8ff3e0b8a6b4fe1d3d238"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.940452355Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"e513fd4c51540c90","traceId":"a67a22e7fab8ff3e0b8a6b4fe1d3d238"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.940470098Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115926-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:05:15.943180653Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message job, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.943210051Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.943251907Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.946568376Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28cf62e2-bc87-4bb2-ac5d-644227d3f0120","scope":"coa.runtime","time":"2025-01-16T02:05:15.946599499Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115946-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.950015524Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115946-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.950046282Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993115946-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.950059524Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.950073812Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:05:15.950049602Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28cf62e2-bc87-4bb2-ac5d-644227d3f0121","scope":"coa.runtime","time":"2025-01-16T02:05:15.95011607Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115946-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.950104649Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:15.950282158Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac8300}","scope":"coa.runtime","time":"2025-01-16T02:05:15.950473201Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:15.950491914Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.950497099Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.950502908Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:15.950507264Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"88ac6b1698c06e1e","traceId":"30098c15ec9bb9f20388d25b591a9412"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.950522058Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Get:339","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"d24fadb7c7e5a7ed","traceId":"f293507790e02527cc3938b4e7338f9b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.950698681Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).getDeployment:279","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"87c34186615063f6","traceId":"f293507790e02527cc3938b4e7338f9b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getDeployment scope - defaultscope, name - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.950718779Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115950-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.953576594Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v28cf62e2-bc87-4bb2-ac5d-644227d3f012","scope":"coa.runtime","time":"2025-01-16T02:05:15.953598505Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115950-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:05:15.953640891Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993115950-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.953661518Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.953676048Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115950-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.953699001Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"f10dfb0e985172cc","traceId":"018c3699d8b3a34114ff17994ea1cbcf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:15.953845446Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc0001f9000}","scope":"coa.runtime","time":"2025-01-16T02:05:15.954026494Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:15.95404292Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.954047787Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:05:15.954052396Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:15.954056487Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"99a2f2eca5b2a4db","traceId":"026bfd51d367b4de2f19642906c79035"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:05:15.954069208Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:281","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"7dadca851d0a250a","traceId":"47eda77e0eeb6828c6ad190a052e4fe9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:05:15.954214788Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115953-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:05:15.956693091Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993115953-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.956711999Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115953-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.956714411Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115953-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.956721407Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.956718567Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":null,\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"28cf62e2-bc87-4bb2-ac5d-644227d3f012\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:15.951872343Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:15.956754942Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 get 2025-01-16 02:05:15.940390306 +0000 UTC m=+51.906854205 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28cf62e2-bc87-4bb2-ac5d-644227d3f012 0 2025-01-16 02:05:15.951872343 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:05:15.956848164Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.956875232Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:15.956882175Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.956887338Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).getCustomResource:992","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"7dadca851d0a250a","traceId":"47eda77e0eeb6828c6ad190a052e4fe9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Kubectl Target): failed to read object: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:05:15.961254557Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:340","diagnostics":{"correlationId":"7a6b479b-0e5b-44f7-9f97-c22121300ef7","resourceId":"","traceContext":{"spanId":"7dadca851d0a250a","traceId":"47eda77e0eeb6828c6ad190a052e4fe9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): custom resource not found: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:05:15.96129843Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115936-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.962171077Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:05:15.962199661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115946-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.96545616Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:05:15.965484374Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115953-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.968751778Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.968780914Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115968-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.971864069Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115968-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.971877947Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993115968-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.971926056Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.971931963Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115968-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.971951827Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"28cf62e2-bc87-4bb2-ac5d-644227d3f012\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:15.961338023Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:15.971998097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 get 2025-01-16 02:05:15.940390306 +0000 UTC m=+51.906854205 0001-01-01 00:00:00 +0000 UTC 2 1 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28cf62e2-bc87-4bb2-ac5d-644227d3f012 1 2025-01-16 02:05:15.961338023 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:05:15.972072997Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.972099552Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:15.972106751Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.972111665Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vget\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 get 2025-01-16 02:05:15.940390306 +0000 UTC m=+51.906854205 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.972155132Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:15.972178097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleGetPlanCompletetion:343","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to get current state %v\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 get 2025-01-16 02:05:15.940390306 +0000 UTC m=+51.906854205 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  1 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.972217593Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1285","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Compute current state %v for Plan ID: %s{[] [] map[]}28cf62e2-bc87-4bb2-ac5d-644227d3f012","scope":"coa.runtime","time":"2025-01-16T02:05:15.97223927Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.972254551Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115950-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.975058358Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.975082599Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:05:15.975114222Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1288","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get previous desired state %+v\u003cnil\u003e","scope":"coa.runtime","time":"2025-01-16T02:05:15.975137403Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1296","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get current desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.975175595Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1301","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.975213165Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1309","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get merged state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.975243909Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to publish topic to deployment plan %v merged state %v get plan %v\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 get 2025-01-16 02:05:15.940390306 +0000 UTC m=+51.906854205 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  1 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000590b40} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc0008402d0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b82f80}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {[{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.975336306Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115975-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.980472055Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993115975-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.980491649Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115975-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.980492499Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115975-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.980503069Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.980499733Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:05:15.980661998Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.980896572Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:15.980915898Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.980921767Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s28cf62e2-bc87-4bb2-ac5d-644227d3f012","scope":"coa.runtime","time":"2025-01-16T02:05:15.980927684Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ee843e8ef22cfbcc","traceId":"0858924174dd1271dae152d1c4b9938e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:05:15.980945279Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"70f2abd26d81c889","traceId":"8bccc913b5780deaad176bad5975e224"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:15.980958317Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"f30a66499b177c9a","traceId":"8bccc913b5780deaad176bad5975e224"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.980976313Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115968-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.983528925Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.983553761Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"993f0e91775b287c","traceId":"845d853ab51dcadd91547b1c9b631c05"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:15.983623942Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:184","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"993f0e91775b287c","traceId":"845d853ab51dcadd91547b1c9b631c05"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v0container","scope":"coa.runtime","time":"2025-01-16T02:05:15.986817712Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"993f0e91775b287c","traceId":"845d853ab51dcadd91547b1c9b631c05"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28cf62e2-bc87-4bb2-ac5d-644227d3f0120","scope":"coa.runtime","time":"2025-01-16T02:05:15.986840442Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115987-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.990385692Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"993f0e91775b287c","traceId":"845d853ab51dcadd91547b1c9b631c05"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v28cf62e2-bc87-4bb2-ac5d-644227d3f012","scope":"coa.runtime","time":"2025-01-16T02:05:15.99040448Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115987-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.990413386Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993115987-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.990424895Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:15.990438542Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115987-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.990472618Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"993f0e91775b287c","traceId":"845d853ab51dcadd91547b1c9b631c05"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:15.990646544Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000dd9080}","scope":"coa.runtime","time":"2025-01-16T02:05:15.990885036Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:15.990904216Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:15.990910012Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:05:15.990916007Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:15.990920796Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c8db35371e7c1959","traceId":"882f711acce961c5ad0c02a9190b0b6c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.990941353Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:849","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb4273aab8dc9d85","traceId":"906443b05aecbb9732a80b005672052f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): applying artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.991194608Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:876","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb4273aab8dc9d85","traceId":"906443b05aecbb9732a80b005672052f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s Target): dryRun is enabled,, skipping apply","scope":"providers.target.k8s","time":"2025-01-16T02:05:15.991236929Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115975-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.99356165Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.993595545Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993115993-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:15.996757841Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993115993-0","scope":"coa.runtime","time":"2025-01-16T02:05:15.996788962Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993115993-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.996799468Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993115993-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:15.996813029Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:15.996808936Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"28cf62e2-bc87-4bb2-ac5d-644227d3f012\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:15.991254464Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:15.9968599Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 apply 2025-01-16 02:05:15.980876592 +0000 UTC m=+51.947340492 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 2 0 map[]  1 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000b8a140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc000841050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e1b880}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28cf62e2-bc87-4bb2-ac5d-644227d3f012 0 2025-01-16 02:05:15.991254464 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:05:15.997008507Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:15.997041419Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:15.997050804Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:15.997056302Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:05:15.997063618Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:300","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v1yaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:05:15.997071404Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28cf62e2-bc87-4bb2-ac5d-644227d3f0121","scope":"coa.runtime","time":"2025-01-16T02:05:15.997078095Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115987-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.000169685Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:16.0002057Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993116000-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:16.003533529Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:16.003562687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993116000-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:16.00357764Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993116000-0","scope":"coa.runtime","time":"2025-01-16T02:05:16.003595363Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:05:16.003612341Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993116000-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.003656083Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:16.003585405Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b82282dc173db083","traceId":"888d9761c535c2e490f4995c850a1076"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:16.003735097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"461cdee995c4a34e","traceId":"888d9761c535c2e490f4995c850a1076"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.003753291Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:05:16.003846865Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d6e788274606e56b","traceId":"fb8b88d4d35195f1dce522ceaf6d8e45"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.0039234Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc00108f500}","scope":"coa.runtime","time":"2025-01-16T02:05:16.004092301Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:05:16.004112225Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:16.004117397Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:05:16.004123089Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:05:16.004127995Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"38c1dabe8d13ec76","traceId":"52860d87d247c0d873140c5de416aa41"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:05:16.004142137Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"2d839bdb4d0c61c1","traceId":"192582347f14ca49ec250162fdbcf0f1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target):  applying artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:05:16.004323031Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:398","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"2d839bdb4d0c61c1","traceId":"192582347f14ca49ec250162fdbcf0f1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Kubectl Target): dryRun is enabled,, skipping apply","scope":"providers.target.kubectl","time":"2025-01-16T02:05:16.004345433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993116007-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:05:16.010464811Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993116007-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:16.010483544Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993116007-0","scope":"coa.runtime","time":"2025-01-16T02:05:16.010492869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:05:16.010504714Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993116007-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.010544722Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"28cf62e2-bc87-4bb2-ac5d-644227d3f012\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:05:16.004356495Z\"}","scope":"coa.runtime","time":"2025-01-16T02:05:16.01059745Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 apply 2025-01-16 02:05:15.980876592 +0000 UTC m=+51.947340492 0001-01-01 00:00:00 +0000 UTC 2 1 {1 1 2 0 map[defaulttarget:{OK  map[]}]  1 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000b8a140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc000841050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e1b880}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28cf62e2-bc87-4bb2-ac5d-644227d3f012 1 2025-01-16 02:05:16.004356495 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:05:16.010725898Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:16.01076344Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:16.010773147Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:16.010778287Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:05:16.010785018Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:16.010796661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:16.010813487Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ce04feee1f466670","traceId":"412becba72c4dea584144bdf7637aea6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:16.01083351Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"9e6d58bed5201b4f","traceId":"412becba72c4dea584144bdf7637aea6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.010851779Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993115993-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.013576573Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:05:16.013603533Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993116000-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.01663789Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:05:16.016656102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7ea84794f5c71db7","traceId":"034acc09587feaddc52cfa55a5aab027"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.016694232Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7ea84794f5c71db7","traceId":"034acc09587feaddc52cfa55a5aab027"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vapply\u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 apply 2025-01-16 02:05:15.980876592 +0000 UTC m=+51.947340492 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  1 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000b8a140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc000841050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e1b880}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:16.019836035Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7ea84794f5c71db7","traceId":"034acc09587feaddc52cfa55a5aab027"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:16.019868608Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1329","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7ea84794f5c71db7","traceId":"034acc09587feaddc52cfa55a5aab027"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"handle plan completetion:begin to handle plan completetion \u0026{ 28cf62e2-bc87-4bb2-ac5d-644227d3f012 apply 2025-01-16 02:05:15.980876592 +0000 UTC m=+51.947340492 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  1 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000b8a140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc000841050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e1b880}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:05:16.019940704Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7ea84794f5c71db7","traceId":"034acc09587feaddc52cfa55a5aab027"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:16.019965595Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5c47dd914621fef","traceId":"e3ebf5f3fd16919a1da97916b8efd5e9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:16.019976748Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"2ce7e8142a0be0d1","traceId":"e3ebf5f3fd16919a1da97916b8efd5e9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.019997805Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47a5cee32c287d99","traceId":"64a09d33b846252219443cb10c635e6d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.020126722Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1334","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47a5cee32c287d99","traceId":"64a09d33b846252219443cb10c635e6d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:16.023198638Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1336","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47a5cee32c287d99","traceId":"64a09d33b846252219443cb10c635e6d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"if it is dry run %+vtrue","scope":"coa.runtime","time":"2025-01-16T02:05:16.023222174Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1337","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47a5cee32c287d99","traceId":"64a09d33b846252219443cb10c635e6d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get dep %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000b8a140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:1 instance.solution.symphony/started-at:2025-01-16T02:05:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:18ad7715-fb4a-4b72-a01e-d65faa323c13 management.azure.com/runningCorrelationId:18ad7715-fb4a-4b72-a01e-d65faa323c13]} 0xc000841050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e1b880}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 1 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:05:16.02325138Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47a5cee32c287d99","traceId":"64a09d33b846252219443cb10c635e6d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 1, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:05:16.023275228Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"91bd095771d5236c","traceId":"9aa6eaf51c647264eef1bd6429f5650b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:16.023296357Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ce4fd358342e86bf","traceId":"9aa6eaf51c647264eef1bd6429f5650b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.023306547Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b7fbf84186c40a0b","traceId":"cc224f42a336b4173c8cd56c38ed60e1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:16.023525983Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1374","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b7fbf84186c40a0b","traceId":"cc224f42a336b4173c8cd56c38ed60e1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"final unlock %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:16.026702952Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:05:16.026732298Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc0003094c0 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:05:16.026743433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{0 0 \u003cnil\u003e} default\u0026\u0026defaultinstance {1 0} \u003cnil\u003e \u003cnil\u003e}","scope":"coa.runtime","time":"2025-01-16T02:05:16.02674952Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).UnlockObject:1321","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b7fbf84186c40a0b","traceId":"cc224f42a336b4173c8cd56c38ed60e1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"unlock %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:16.026754658Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993116007-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:05:16.029824688Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:05:16.029862583Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:24.126347201Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:24.126597Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:25.671395097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:25.671423376Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"14f38f49-05dd-4f0d-b19c-c6a20ac07244","resourceId":"","traceContext":{"spanId":"f58b2cba55664d41","traceId":"90c435c05654edd4565b20e9bad38428"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, target-runtime-defaulttarget","scope":"coa.runtime","time":"2025-01-16T02:05:25.672733565Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"14f38f49-05dd-4f0d-b19c-c6a20ac07244","resourceId":"","traceContext":{"spanId":"0095787512f96dab","traceId":"90c435c05654edd4565b20e9bad38428"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: target-runtime-defaulttarget, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:25.672766512Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"14f38f49-05dd-4f0d-b19c-c6a20ac07244","resourceId":"","traceContext":{"spanId":"5aab519ee77ad66d","traceId":"90c435c05654edd4565b20e9bad38428"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-target-runtime-defaulttarget with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:25.672782109Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:05:25.895686381Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:05:25.895721845Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"eb19c4f5dcb0a247","traceId":"7413433967ee80c10e294909c14284ac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:05:25.897322224Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"4c27f4ce441ac3b4","traceId":"7413433967ee80c10e294909c14284ac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:05:25.897361732Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"c0679c659be6ccbf","traceId":"7413433967ee80c10e294909c14284ac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:05:25.89737431Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:39.126661472Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:39.126664658Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:54.126167612Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:05:54.126172755Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:09.126812726Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:09.126872651Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:24.1261804Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:24.126235661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:39.125995775Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:39.126073715Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:54.126076896Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:06:54.126247044Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:09.126989887Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:09.127252704Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:24.126653086Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:24.126726958Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:39.126893615Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:39.12696544Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:54.126200687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:07:54.126241253Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:09.126030878Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:09.126166734Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:08:15.96001371Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:08:15.96005809Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"e6cc5dac307d2a33","traceId":"ec3b4b9bc20c368a07920978c08f566f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:15.96376087Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"e974341d293545c9","traceId":"ec3b4b9bc20c368a07920978c08f566f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:15.963802386Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"8bfb8a6c0d8dd4e6","traceId":"ec3b4b9bc20c368a07920978c08f566f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.963817352Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:08:15.970680286Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:08:15.970719045Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"7e2fbaa68557e3eb","traceId":"de099d8ab7ad7a3a86c37cc8b47aec07"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: POST, ","scope":"coa.runtime","time":"2025-01-16T02:08:15.972195373Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993295972-0, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:08:15.976320205Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993295972-0 for topic job","scope":"coa.runtime","time":"2025-01-16T02:08:15.97634771Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic job, group , messages 1736993295972-0","scope":"coa.runtime","time":"2025-01-16T02:08:15.976352616Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic job","scope":"coa.runtime","time":"2025-01-16T02:08:15.976450713Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993295972-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:08:15.976482133Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:425","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"cca6d2e36fa4a45a","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): handling job event objectType: deployment, job action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:08:15.976650341Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:274","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"133d204cc5a18a8e","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): get state h_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:08:15.976688824Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:290","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"133d204cc5a18a8e","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Memory State): failed to get h_defaultinstance state: Not Found: entry 'h_defaultinstance' is not found in namespace default","scope":"coa.runtime","time":"2025-01-16T02:08:15.976707642Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).DelayOrSkipJob:346","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"133d204cc5a18a8e","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): heartbeat h_defaultinstance is not found","scope":"coa.runtime","time":"2025-01-16T02:08:15.976752915Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:576","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"133d204cc5a18a8e","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment job defaultinstance, action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:08:15.976775777Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:578","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"133d204cc5a18a8e","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment spec: {\"solutionName\":\"defaultsolution-v-v1\",\"solution\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultsolution-v-v1\",\"labels\":{\"rootResource\":\"defaultsolution\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Solution\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultsolution-v-v1\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"sample-prometheus-server\\\",\\\"properties\\\":{\\\"container.image\\\":\\\"prom/prometheus\\\",\\\"container.imagePullPolicy\\\":\\\"Always\\\",\\\"container.ports\\\":\\\"[{\\\\\\\"containerPort\\\\\\\":9090,\\\\\\\"protocol\\\\\\\":\\\\\\\"TCP\\\\\\\"}]\\\",\\\"container.resources\\\":\\\"{\\\\\\\"requests\\\\\\\":{\\\\\\\"cpu\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"memory\\\\\\\":\\\\\\\"100Mi\\\\\\\"}}\\\"},\\\"type\\\":\\\"container\\\"},{\\\"name\\\":\\\"conditional-activation-deployment\\\",\\\"properties\\\":{\\\"resource\\\":{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"labels\\\":{\\\"application\\\":\\\"testapp\\\",\\\"version\\\":\\\"1\\\"},\\\"name\\\":\\\"testapp\\\"},\\\"spec\\\":{\\\"replicas\\\":1,\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"command\\\":[\\\"/bin/sleep\\\",\\\"10000\\\"],\\\"image\\\":\\\"k8s.gcr.io/e2e-test-images/busybox:1.29\\\",\\\"name\\\":\\\"busybox\\\"}],\\\"nodeSelector\\\":{\\\"kubernetes.io/os\\\":\\\"linux\\\"},\\\"volumes\\\":[{\\\"configMap\\\":{\\\"name\\\":\\\"conditional-activation-config\\\"},\\\"name\\\":\\\"config\\\"}]}}}}},\\\"type\\\":\\\"yaml.k8s\\\"}],\\\"displayName\\\":\\\"defaultsolution-v-v1\\\",\\\"rootResource\\\":\\\"defaultsolution\\\"}}\\n\"}},\"spec\":{\"displayName\":\"defaultsolution-v-v1\",\"components\":[{\"name\":\"sample-prometheus-server\",\"type\":\"container\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"}},{\"name\":\"conditional-activation-deployment\",\"type\":\"yaml.k8s\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}}}]}},\"instance\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultinstance\",\"labels\":{\"solution\":\"defaultsolution-v-v1\",\"target\":\"defaulttarget\"},\"annotations\":{\"SummaryJobIdKey\":\"2\",\"instance.solution.symphony/started-at\":\"2025-01-16T02:08:15Z\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Instance\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultinstance\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"displayName\\\":\\\"defaultinstance\\\",\\\"isDryRun\\\":true,\\\"reconciliationPolicy\\\":{\\\"interval\\\":\\\"3m\\\",\\\"state\\\":\\\"active\\\"},\\\"scope\\\":\\\"defaultscope\\\",\\\"solution\\\":\\\"defaultsolution:v1\\\",\\\"target\\\":{\\\"name\\\":\\\"defaulttarget\\\"}}}\\n\",\"management.azure.com/correlationId\":\"9ef2dbee-28c2-4571-81c1-93448e6d5400\",\"management.azure.com/runningCorrelationId\":\"9ef2dbee-28c2-4571-81c1-93448e6d5400\"}},\"spec\":{\"displayName\":\"defaultinstance\",\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"}},\"targets\":{\"defaulttarget\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaulttarget\",\"annotations\":{\"SummaryJobIdKey\":\"1\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"fabric.symphony/v1\\\",\\\"kind\\\":\\\"Target\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaulttarget\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"nginx\\\",\\\"properties\\\":{\\\"chart\\\":{\\\"name\\\":\\\"nginx\\\",\\\"repo\\\":\\\"https://charts.bitnami.com/bitnami\\\",\\\"version\\\":\\\"18.1.7\\\"}},\\\"type\\\":\\\"helm.v3\\\"}],\\\"displayName\\\":\\\"defaulttarget\\\",\\\"isDryRun\\\":true,\\\"scope\\\":\\\"defaultscope\\\",\\\"topologies\\\":[{\\\"bindings\\\":[{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.k8s\\\",\\\"role\\\":\\\"instance\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.helm\\\",\\\"role\\\":\\\"helm.v3\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.kubectl\\\",\\\"role\\\":\\\"yaml.k8s\\\"}]}]}}\\n\",\"management.azure.com/correlationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"management.azure.com/runningCorrelationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"target.fabric.symphony/started-at\":\"2025-01-16T02:05:15Z\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"},\"spec\":{\"displayName\":\"defaulttarget\",\"scope\":\"defaultscope\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}],\"topologies\":[{\"bindings\":[{\"role\":\"instance\",\"provider\":\"providers.target.k8s\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"helm.v3\",\"provider\":\"providers.target.helm\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"yaml.k8s\",\"provider\":\"providers.target.kubectl\",\"config\":{\"inCluster\":\"true\"}}]}]}}},\"assignments\":{\"defaulttarget\":\"{sample-prometheus-server}{conditional-activation-deployment}\"},\"generation\":\"1\",\"jobID\":\"2\",\"objectNamespace\":\"default\",\"hash\":\"1760ee01b198a8ca24a21518b3dd4775\",\"isDryRun\":true}","scope":"coa.runtime","time":"2025-01-16T02:08:15.976796005Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:08:15.977228828Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:08:15.977269088Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:761","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"9a714f381ceef43f","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onReconcile, method: POST","scope":"coa.runtime","time":"2025-01-16T02:08:15.978892309Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Lock:112","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init lock a memoryKeyLockdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:15.9790539Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:784","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"9f51e0d3c892b1c8","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock succeed %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:15.97907104Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:793","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"9f51e0d3c892b1c8","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588140} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc000a13050 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d22480}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:08:15.979107262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:794","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"9f51e0d3c892b1c8","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): reconciling deployment.InstanceName: defaultinstance, deployment.SolutionName: defaultsolution-v-v1, remove: false, namespace: default, targetName: , generation: 1, jobID: 2","scope":"coa.runtime","time":"2025-01-16T02:08:15.979125491Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"b5f85934c44e5ebf","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.979140433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"b5f85934c44e5ebf","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:08:15.979329762Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"b5f85934c44e5ebf","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:08:15.979367151Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"7ddfa671d10a69bf","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:15.979381551Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"184348ed6d1a751d","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.97939561Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.979585145Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.EvaluateDeployment:1340","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" (Parser): Evaluate deployment completed.","scope":"coa.runtime","time":"2025-01-16T02:08:15.985644276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:886","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"publish topic for object %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:15.985674971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993295985-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:15.989447294Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993295985-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:15.989459664Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993295985-0","scope":"coa.runtime","time":"2025-01-16T02:08:15.989544519Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:15.989554068Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993295985-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:15.989582697Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"ecc8078adc6bb880","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states d_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:08:15.989589866Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:15.989724968Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:15.989892719Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:15.989911037Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:15.98991764Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s92b2c0c7-c66d-4eea-ac82-369951739c58","scope":"coa.runtime","time":"2025-01-16T02:08:15.989923344Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"06f666d9307ea436","traceId":"fd6bb80f08bd1442198f8aa24e064ca2"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:08:15.989933171Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"050df2c0c73aa50d","traceId":"b7c183a9c034bfec1d76886c82f0bcba"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:15.98994434Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"11b2a5660ad077e1","traceId":"b7c183a9c034bfec1d76886c82f0bcba"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.989953687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993295972-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:08:15.992899972Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message job, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:15.992932316Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:15.993002959Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:08:15.996646687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s92b2c0c7-c66d-4eea-ac82-369951739c580","scope":"coa.runtime","time":"2025-01-16T02:08:15.996692048Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993295997-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.000788493Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993295997-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.000855706Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.000872892Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993295997-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.000829507Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:08:16.001031103Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s92b2c0c7-c66d-4eea-ac82-369951739c581","scope":"coa.runtime","time":"2025-01-16T02:08:16.001080059Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993295997-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.000941782Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:08:16.001409413Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d23b00}","scope":"coa.runtime","time":"2025-01-16T02:08:16.001678312Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:08:16.001698042Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:08:16.001704235Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.001713484Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:08:16.001719427Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a89d2ac7603c68c6","traceId":"4d17fc626b11f355d77d9a25beb42091"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.001772163Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Get:339","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"516b5427455362e1","traceId":"b7dff438e8ffaccd4ee426ff32981594"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.00203841Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).getDeployment:279","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"89404ecad68c70ab","traceId":"b7dff438e8ffaccd4ee426ff32981594"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getDeployment scope - defaultscope, name - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.002062724Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296001-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:08:16.005633385Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993296001-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.005656138Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296001-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.005654035Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.005672636Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v92b2c0c7-c66d-4eea-ac82-369951739c58","scope":"coa.runtime","time":"2025-01-16T02:08:16.005672658Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296001-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.005695029Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"107ddcd6f03ee8f5","traceId":"709e5302a9382a6b6ba588eeac6e902c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:08:16.00586549Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000ac9380}","scope":"coa.runtime","time":"2025-01-16T02:08:16.006077197Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:08:16.006098185Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:08:16.006103314Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:08:16.006109368Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:08:16.006113918Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"cb27c08f3a5281e8","traceId":"530c7b20cd49800a4d790afff473626e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.006132286Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:281","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"d106d442f80a2e94","traceId":"064e374904a16b6badda7ddd62adf9de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.006292065Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296005-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:08:16.008870779Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296005-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.00888927Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993296005-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.008897236Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.00893525Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296005-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.008964623Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":null,\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"92b2c0c7-c66d-4eea-ac82-369951739c58\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:08:16.003776296Z\"}","scope":"coa.runtime","time":"2025-01-16T02:08:16.009002797Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 get 2025-01-16 02:08:15.989885772 +0000 UTC m=+231.956349671 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 0 0 map[]  2 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 92b2c0c7-c66d-4eea-ac82-369951739c58 0 2025-01-16 02:08:16.003776296 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:08:16.009107085Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.009139035Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.009147996Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.0091531Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).getCustomResource:992","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"d106d442f80a2e94","traceId":"064e374904a16b6badda7ddd62adf9de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Kubectl Target): failed to read object: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.009454973Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:340","diagnostics":{"correlationId":"18ad7715-fb4a-4b72-a01e-d65faa323c13","resourceId":"","traceContext":{"spanId":"d106d442f80a2e94","traceId":"064e374904a16b6badda7ddd62adf9de"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): custom resource not found: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.009481158Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993295985-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.012144047Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:08:16.012183003Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296012-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:08:16.015704547Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993296012-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.015774831Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.015786917Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296012-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.015868019Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296012-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.01591262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993295997-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.015811392Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:08:16.016038336Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296005-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.015818892Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"92b2c0c7-c66d-4eea-ac82-369951739c58\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:08:16.009522596Z\"}","scope":"coa.runtime","time":"2025-01-16T02:08:16.016063354Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:08:16.016065755Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 get 2025-01-16 02:08:15.989885772 +0000 UTC m=+231.956349671 0001-01-01 00:00:00 +0000 UTC 2 1 {1 0 0 0 map[]  2 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 92b2c0c7-c66d-4eea-ac82-369951739c58 1 2025-01-16 02:08:16.009522596 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:08:16.016251012Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.01629022Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.016301571Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.016315455Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vget\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 get 2025-01-16 02:08:15.989885772 +0000 UTC m=+231.956349671 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  2 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.016348384Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:08:16.016392154Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleGetPlanCompletetion:343","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to get current state %v\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 get 2025-01-16 02:08:15.989885772 +0000 UTC m=+231.956349671 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  2 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.016432531Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1285","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Compute current state %v for Plan ID: %s{[] [] map[]}92b2c0c7-c66d-4eea-ac82-369951739c58","scope":"coa.runtime","time":"2025-01-16T02:08:16.016448057Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.016478371Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296001-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.019856251Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.019900934Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:08:16.019939834Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1288","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get previous desired state %+v\u003cnil\u003e","scope":"coa.runtime","time":"2025-01-16T02:08:16.019969959Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1296","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get current desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.020231862Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1301","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.020304867Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1309","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get merged state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.020351978Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to publish topic to deployment plan %v merged state %v get plan %v\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 get 2025-01-16 02:08:15.989885772 +0000 UTC m=+231.956349671 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  2 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85950} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc00093f9e0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000444e00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {[{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.020516742Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296021-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.024660944Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993296021-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.02469595Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:16.024704601Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296021-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.024734971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296021-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:16.024664293Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:08:16.024896515Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.02512344Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.025149019Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.025157662Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s92b2c0c7-c66d-4eea-ac82-369951739c58","scope":"coa.runtime","time":"2025-01-16T02:08:16.025166078Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"eb651248037bb7c6","traceId":"f79c9fe36e85de6f167b986319264569"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:08:16.025192414Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"130848478f209420","traceId":"f0b015c1038b50e7485cf5676de719d1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:16.025219842Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"12286e35575cfae7","traceId":"f0b015c1038b50e7485cf5676de719d1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.025239459Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296012-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.028228465Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.028279267Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8e18688d23dd56e7","traceId":"aa0ac05fc14e06c7cd7eda40e96a264b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.028395678Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:184","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8e18688d23dd56e7","traceId":"aa0ac05fc14e06c7cd7eda40e96a264b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v0container","scope":"coa.runtime","time":"2025-01-16T02:08:16.032361713Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8e18688d23dd56e7","traceId":"aa0ac05fc14e06c7cd7eda40e96a264b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s92b2c0c7-c66d-4eea-ac82-369951739c580","scope":"coa.runtime","time":"2025-01-16T02:08:16.032431929Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296032-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.038170227Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296032-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.03820656Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8e18688d23dd56e7","traceId":"aa0ac05fc14e06c7cd7eda40e96a264b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v92b2c0c7-c66d-4eea-ac82-369951739c58","scope":"coa.runtime","time":"2025-01-16T02:08:16.038230069Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993296032-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.038208163Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.038314034Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296032-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.038341728Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8e18688d23dd56e7","traceId":"aa0ac05fc14e06c7cd7eda40e96a264b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:08:16.038551209Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000e57480}","scope":"coa.runtime","time":"2025-01-16T02:08:16.038798844Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:08:16.03881881Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:08:16.038824183Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.038830495Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:08:16.038834946Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d8306819d97b02d8","traceId":"c36b8a97435dd973a4417970b5dee0fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.038857289Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:849","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"16448658a15b46fd","traceId":"07365326b19ce6c9cc3fb921bca0f38d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): applying artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.039036007Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:876","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"16448658a15b46fd","traceId":"07365326b19ce6c9cc3fb921bca0f38d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s Target): dryRun is enabled,, skipping apply","scope":"providers.target.k8s","time":"2025-01-16T02:08:16.039060238Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296021-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.042118767Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.042154106Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296042-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.045784472Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993296042-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.045837824Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.045846467Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296042-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.045903377Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296042-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.045809319Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"92b2c0c7-c66d-4eea-ac82-369951739c58\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:08:16.039074109Z\"}","scope":"coa.runtime","time":"2025-01-16T02:08:16.045972364Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 apply 2025-01-16 02:08:16.025117008 +0000 UTC m=+231.991580908 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 2 0 map[]  2 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046b4f0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc0009465a0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51500}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 92b2c0c7-c66d-4eea-ac82-369951739c58 0 2025-01-16 02:08:16.039074109 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:08:16.046161786Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.046196368Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.046208012Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.04621409Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.046221504Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:300","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v1yaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:08:16.046237391Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s92b2c0c7-c66d-4eea-ac82-369951739c581","scope":"coa.runtime","time":"2025-01-16T02:08:16.046252106Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296032-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.049403937Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.049447097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296049-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.052787462Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.052820293Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:08:16.052848687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fde3ee262765e2a1","traceId":"9004cdab738c274bddbea2bc42680a00"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:16.052877333Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a495f905f8a1c3e8","traceId":"9004cdab738c274bddbea2bc42680a00"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.052898512Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296049-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.052823478Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993296049-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.052955691Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:08:16.052974673Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296049-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.053007319Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"57234fb0460d48b6","traceId":"dd894f56d1f2bec609f41cd606b28df0"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.053066659Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:08:16.053205165Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d31b00}","scope":"coa.runtime","time":"2025-01-16T02:08:16.05347857Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:08:16.053499312Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:08:16.05350512Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:08:16.053511587Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:08:16.053516506Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6efbf549d4423d93","traceId":"e0de9e95d2be93a5f9d05c7acebedfac"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.05353149Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"64a94ce114ca1e50","traceId":"c3a743b432f9a23ac96bd4de3188dfb7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target):  applying artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.053704049Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:398","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"64a94ce114ca1e50","traceId":"c3a743b432f9a23ac96bd4de3188dfb7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Kubectl Target): dryRun is enabled,, skipping apply","scope":"providers.target.kubectl","time":"2025-01-16T02:08:16.053726183Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993296056-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:08:16.06012262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993296056-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.060153883Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993296056-0","scope":"coa.runtime","time":"2025-01-16T02:08:16.060163052Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:08:16.060220986Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993296056-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.060239077Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"92b2c0c7-c66d-4eea-ac82-369951739c58\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:08:16.053737761Z\"}","scope":"coa.runtime","time":"2025-01-16T02:08:16.06031181Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 apply 2025-01-16 02:08:16.025117008 +0000 UTC m=+231.991580908 0001-01-01 00:00:00 +0000 UTC 2 1 {1 1 2 0 map[defaulttarget:{OK  map[]}]  2 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046b4f0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc0009465a0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51500}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 92b2c0c7-c66d-4eea-ac82-369951739c58 1 2025-01-16 02:08:16.053737761 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:08:16.060435045Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.060464766Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.060474167Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.060479941Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.060486033Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.060494016Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:08:16.060504351Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"03d5dc41db1cbbd1","traceId":"202077f1e98910ff5f67b73e223b2d88"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:16.060523699Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"7838c59e0ba08ef3","traceId":"202077f1e98910ff5f67b73e223b2d88"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.060536687Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296042-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.063378905Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:08:16.063429026Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296049-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.066765819Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:08:16.066809307Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"84abf9d1d49ca952","traceId":"1512545857ae3a1bc8f6ec8d2fa27446"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.066865031Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"84abf9d1d49ca952","traceId":"1512545857ae3a1bc8f6ec8d2fa27446"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vapply\u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 apply 2025-01-16 02:08:16.025117008 +0000 UTC m=+231.991580908 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  2 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046b4f0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc0009465a0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51500}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.070756096Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"84abf9d1d49ca952","traceId":"1512545857ae3a1bc8f6ec8d2fa27446"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:08:16.070803794Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1329","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"84abf9d1d49ca952","traceId":"1512545857ae3a1bc8f6ec8d2fa27446"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"handle plan completetion:begin to handle plan completetion \u0026{ 92b2c0c7-c66d-4eea-ac82-369951739c58 apply 2025-01-16 02:08:16.025117008 +0000 UTC m=+231.991580908 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  2 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046b4f0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc0009465a0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51500}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:08:16.070874728Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"84abf9d1d49ca952","traceId":"1512545857ae3a1bc8f6ec8d2fa27446"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:08:16.070894342Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"18a39188a9802a74","traceId":"e40caabc3d7825d98421faf1b113b488"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:16.070915232Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c4fbf30cd3c6af27","traceId":"e40caabc3d7825d98421faf1b113b488"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.070926924Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d2359c831ab37b00","traceId":"a16b684c6e87e0ae38b1d7b95f42861f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.071107524Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1334","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d2359c831ab37b00","traceId":"a16b684c6e87e0ae38b1d7b95f42861f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.074466396Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1336","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d2359c831ab37b00","traceId":"a16b684c6e87e0ae38b1d7b95f42861f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"if it is dry run %+vtrue","scope":"coa.runtime","time":"2025-01-16T02:08:16.074502369Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1337","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d2359c831ab37b00","traceId":"a16b684c6e87e0ae38b1d7b95f42861f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get dep %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046b4f0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:2 instance.solution.symphony/started-at:2025-01-16T02:08:15Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:9ef2dbee-28c2-4571-81c1-93448e6d5400 management.azure.com/runningCorrelationId:9ef2dbee-28c2-4571-81c1-93448e6d5400]} 0xc0009465a0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b51500}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 2 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:08:16.074538248Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d2359c831ab37b00","traceId":"a16b684c6e87e0ae38b1d7b95f42861f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 2, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:08:16.074564125Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"98617f3991e5865b","traceId":"9794195395b08d4c5926e1f69b4c1aff"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:16.07459153Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"bba4fa2436f5d516","traceId":"9794195395b08d4c5926e1f69b4c1aff"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.074612163Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"70daad2fb2057f8a","traceId":"2f4fb28c0c5e356f71ecd813951e5363"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:16.074766775Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1374","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"70daad2fb2057f8a","traceId":"2f4fb28c0c5e356f71ecd813951e5363"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"final unlock %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.078016108Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:08:16.078049514Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:08:16.078061645Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539003144153266 51993245777 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:08:16.078067614Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).UnlockObject:1321","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"70daad2fb2057f8a","traceId":"2f4fb28c0c5e356f71ecd813951e5363"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"unlock %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:16.078073181Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993296056-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:08:16.081210906Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:08:16.081239556Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:24.126648825Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:24.126672654Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:08:25.965776703Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:08:25.965979105Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"11b53f79ea5910aa","traceId":"1bc717d85a5391693a9b97b3d61a5f8f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:08:25.968481074Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"3af1bd4f3b8abdc8","traceId":"1bc717d85a5391693a9b97b3d61a5f8f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:08:25.968590711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"fb64add827b817f7","traceId":"1bc717d85a5391693a9b97b3d61a5f8f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:08:25.968627801Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:39.126095869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:39.126259879Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:54.126176391Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:08:54.126202001Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:09.127004663Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:09.127107826Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:24.12636759Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:24.126377261Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:39.126713818Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:39.12679132Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:54.126656733Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:09:54.126694368Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:09.125979754Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:09.126288332Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:24.126604791Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:24.126750976Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:39.126706558Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:39.126764191Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:54.126206481Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:10:54.126334821Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:09.126775091Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:09.126955998Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:11:16.010116516Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:11:16.010145415Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"484e6bbe930e8b9e","traceId":"6e0fa4ff334f0b75e180c9f624a5a9f9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.012832533Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"75cbc9870a28f865","traceId":"6e0fa4ff334f0b75e180c9f624a5a9f9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.012875785Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"10798c74d933ac85","traceId":"6e0fa4ff334f0b75e180c9f624a5a9f9"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.01289016Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:11:16.017479065Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:11:16.017512651Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"90e85c027208a145","traceId":"ae52ce0d4bf3f99f0972f1834f4fd9a3"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: POST, ","scope":"coa.runtime","time":"2025-01-16T02:11:16.018746436Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476019-0, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:11:16.022928659Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic job, group , messages 1736993476019-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.022965481Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic job","scope":"coa.runtime","time":"2025-01-16T02:11:16.022975086Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476019-0 for topic job","scope":"coa.runtime","time":"2025-01-16T02:11:16.022954195Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476019-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:11:16.023026769Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:425","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"97ce5150031eaf9a","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): handling job event objectType: deployment, job action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:11:16.023181888Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:274","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"5a284c67d9b2543d","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): get state h_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:11:16.023209043Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:290","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"5a284c67d9b2543d","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Memory State): failed to get h_defaultinstance state: Not Found: entry 'h_defaultinstance' is not found in namespace default","scope":"coa.runtime","time":"2025-01-16T02:11:16.023223262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).DelayOrSkipJob:346","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"5a284c67d9b2543d","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): heartbeat h_defaultinstance is not found","scope":"coa.runtime","time":"2025-01-16T02:11:16.023282559Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:576","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"5a284c67d9b2543d","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment job defaultinstance, action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:11:16.023314194Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:578","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"5a284c67d9b2543d","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment spec: {\"solutionName\":\"defaultsolution-v-v1\",\"solution\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultsolution-v-v1\",\"labels\":{\"rootResource\":\"defaultsolution\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Solution\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultsolution-v-v1\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"sample-prometheus-server\\\",\\\"properties\\\":{\\\"container.image\\\":\\\"prom/prometheus\\\",\\\"container.imagePullPolicy\\\":\\\"Always\\\",\\\"container.ports\\\":\\\"[{\\\\\\\"containerPort\\\\\\\":9090,\\\\\\\"protocol\\\\\\\":\\\\\\\"TCP\\\\\\\"}]\\\",\\\"container.resources\\\":\\\"{\\\\\\\"requests\\\\\\\":{\\\\\\\"cpu\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"memory\\\\\\\":\\\\\\\"100Mi\\\\\\\"}}\\\"},\\\"type\\\":\\\"container\\\"},{\\\"name\\\":\\\"conditional-activation-deployment\\\",\\\"properties\\\":{\\\"resource\\\":{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"labels\\\":{\\\"application\\\":\\\"testapp\\\",\\\"version\\\":\\\"1\\\"},\\\"name\\\":\\\"testapp\\\"},\\\"spec\\\":{\\\"replicas\\\":1,\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"command\\\":[\\\"/bin/sleep\\\",\\\"10000\\\"],\\\"image\\\":\\\"k8s.gcr.io/e2e-test-images/busybox:1.29\\\",\\\"name\\\":\\\"busybox\\\"}],\\\"nodeSelector\\\":{\\\"kubernetes.io/os\\\":\\\"linux\\\"},\\\"volumes\\\":[{\\\"configMap\\\":{\\\"name\\\":\\\"conditional-activation-config\\\"},\\\"name\\\":\\\"config\\\"}]}}}}},\\\"type\\\":\\\"yaml.k8s\\\"}],\\\"displayName\\\":\\\"defaultsolution-v-v1\\\",\\\"rootResource\\\":\\\"defaultsolution\\\"}}\\n\"}},\"spec\":{\"displayName\":\"defaultsolution-v-v1\",\"components\":[{\"name\":\"sample-prometheus-server\",\"type\":\"container\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"}},{\"name\":\"conditional-activation-deployment\",\"type\":\"yaml.k8s\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}}}]}},\"instance\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultinstance\",\"labels\":{\"solution\":\"defaultsolution-v-v1\",\"target\":\"defaulttarget\"},\"annotations\":{\"SummaryJobIdKey\":\"3\",\"instance.solution.symphony/started-at\":\"2025-01-16T02:11:16Z\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Instance\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultinstance\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"displayName\\\":\\\"defaultinstance\\\",\\\"isDryRun\\\":true,\\\"reconciliationPolicy\\\":{\\\"interval\\\":\\\"3m\\\",\\\"state\\\":\\\"active\\\"},\\\"scope\\\":\\\"defaultscope\\\",\\\"solution\\\":\\\"defaultsolution:v1\\\",\\\"target\\\":{\\\"name\\\":\\\"defaulttarget\\\"}}}\\n\",\"management.azure.com/correlationId\":\"ca3e6664-79f2-4961-ab99-916daba774b8\",\"management.azure.com/runningCorrelationId\":\"ca3e6664-79f2-4961-ab99-916daba774b8\"}},\"spec\":{\"displayName\":\"defaultinstance\",\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"}},\"targets\":{\"defaulttarget\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaulttarget\",\"annotations\":{\"SummaryJobIdKey\":\"1\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"fabric.symphony/v1\\\",\\\"kind\\\":\\\"Target\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaulttarget\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"nginx\\\",\\\"properties\\\":{\\\"chart\\\":{\\\"name\\\":\\\"nginx\\\",\\\"repo\\\":\\\"https://charts.bitnami.com/bitnami\\\",\\\"version\\\":\\\"18.1.7\\\"}},\\\"type\\\":\\\"helm.v3\\\"}],\\\"displayName\\\":\\\"defaulttarget\\\",\\\"isDryRun\\\":true,\\\"scope\\\":\\\"defaultscope\\\",\\\"topologies\\\":[{\\\"bindings\\\":[{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.k8s\\\",\\\"role\\\":\\\"instance\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.helm\\\",\\\"role\\\":\\\"helm.v3\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.kubectl\\\",\\\"role\\\":\\\"yaml.k8s\\\"}]}]}}\\n\",\"management.azure.com/correlationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"management.azure.com/runningCorrelationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"target.fabric.symphony/started-at\":\"2025-01-16T02:05:15Z\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"},\"spec\":{\"displayName\":\"defaulttarget\",\"scope\":\"defaultscope\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}],\"topologies\":[{\"bindings\":[{\"role\":\"instance\",\"provider\":\"providers.target.k8s\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"helm.v3\",\"provider\":\"providers.target.helm\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"yaml.k8s\",\"provider\":\"providers.target.kubectl\",\"config\":{\"inCluster\":\"true\"}}]}]}}},\"assignments\":{\"defaulttarget\":\"{sample-prometheus-server}{conditional-activation-deployment}\"},\"generation\":\"1\",\"jobID\":\"3\",\"objectNamespace\":\"default\",\"hash\":\"1760ee01b198a8ca24a21518b3dd4775\",\"isDryRun\":true}","scope":"coa.runtime","time":"2025-01-16T02:11:16.023324986Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:11:16.023713164Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:11:16.023731843Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:761","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"c0cf696bfa2392e9","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onReconcile, method: POST","scope":"coa.runtime","time":"2025-01-16T02:11:16.025075653Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Lock:112","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init lock a memoryKeyLockdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.025231975Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:784","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"3aaaa618bbe21945","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock succeed %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.025248832Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:793","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"3aaaa618bbe21945","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000e54960} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c48480 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d23100}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:11:16.025277711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:794","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"3aaaa618bbe21945","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): reconciling deployment.InstanceName: defaultinstance, deployment.SolutionName: defaultsolution-v-v1, remove: false, namespace: default, targetName: , generation: 1, jobID: 3","scope":"coa.runtime","time":"2025-01-16T02:11:16.025305613Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"87db826a899c7fca","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.02532145Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"87db826a899c7fca","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:11:16.025492601Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"87db826a899c7fca","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:11:16.025520603Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"ae8ca975ccf232e4","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.025532147Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"dad2f3a6bbe055d8","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.025540711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.025661695Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.EvaluateDeployment:1340","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" (Parser): Evaluate deployment completed.","scope":"coa.runtime","time":"2025-01-16T02:11:16.032111989Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:886","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"publish topic for object %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.032153989Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476032-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.037345408Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993476032-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.037376451Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476032-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.037369376Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.037393522Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476032-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.037439321Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.03759203Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"11f64dac5d44bfb6","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states d_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:11:16.037595864Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.037789923Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.037809709Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.037815666Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s28899ee3-3d30-49c4-bf10-069da00eada2","scope":"coa.runtime","time":"2025-01-16T02:11:16.037821248Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"cdd678240718394f","traceId":"367a8773bebe3ca00fc6592e7af30b96"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:11:16.037832306Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"7b6553ce1f02b0b0","traceId":"1905abdba2465ee3dbd1b240b3e96ca6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.037846257Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"2cf8f01c4053c8f0","traceId":"1905abdba2465ee3dbd1b240b3e96ca6"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.037857275Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476019-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:11:16.041074172Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message job, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.041114647Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.04121393Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:11:16.045088299Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28899ee3-3d30-49c4-bf10-069da00eada20","scope":"coa.runtime","time":"2025-01-16T02:11:16.045135646Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476045-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.049226306Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476045-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.049268502Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:11:16.049328203Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28899ee3-3d30-49c4-bf10-069da00eada21","scope":"coa.runtime","time":"2025-01-16T02:11:16.049359794Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993476045-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.049270899Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.049379863Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476045-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.049442408Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:11:16.049623203Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000639a00}","scope":"coa.runtime","time":"2025-01-16T02:11:16.049839845Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:11:16.049859123Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:11:16.049864626Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.049872553Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:11:16.049878165Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d54da12029a83bd0","traceId":"49cbe92c9ee79aa0b7e3fa13c6bfb461"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.049900556Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Get:339","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"005927d48a9a297a","traceId":"fb8b2379f6b12748838d6fcd772f9fa4"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.050084317Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).getDeployment:279","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"02842f3db2d26585","traceId":"fb8b2379f6b12748838d6fcd772f9fa4"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getDeployment scope - defaultscope, name - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.05010783Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476049-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:11:16.055260036Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993476049-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.055287483Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476049-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.055279941Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.05530453Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v28899ee3-3d30-49c4-bf10-069da00eada2","scope":"coa.runtime","time":"2025-01-16T02:11:16.055309645Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476049-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.055328222Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"b914b07943f5a0a9","traceId":"f29911e35b4b13b486271133465670a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:11:16.055499588Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000a9b080}","scope":"coa.runtime","time":"2025-01-16T02:11:16.055727418Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:11:16.055746366Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:11:16.055753008Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:11:16.055760264Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:11:16.055764943Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"22bf3fc403b82b03","traceId":"32bda98efc4ca7aa560e050d72debdff"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.055787944Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:281","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"8380c93928253941","traceId":"e66ef67a1cf2338c7fc175d41caa874c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.055970184Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476055-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:11:16.058737624Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993476055-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.058769389Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.058779169Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476055-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.058816228Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":null,\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"28899ee3-3d30-49c4-bf10-069da00eada2\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:11:16.052188972Z\"}","scope":"coa.runtime","time":"2025-01-16T02:11:16.058860558Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476055-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.058758753Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 get 2025-01-16 02:11:16.037782722 +0000 UTC m=+412.004246621 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 0 0 map[]  3 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28899ee3-3d30-49c4-bf10-069da00eada2 0 2025-01-16 02:11:16.052188972 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:11:16.058979749Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.058999361Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.059011451Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.059017562Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).getCustomResource:992","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"8380c93928253941","traceId":"e66ef67a1cf2338c7fc175d41caa874c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Kubectl Target): failed to read object: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.0597583Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:340","diagnostics":{"correlationId":"9ef2dbee-28c2-4571-81c1-93448e6d5400","resourceId":"","traceContext":{"spanId":"8380c93928253941","traceId":"e66ef67a1cf2338c7fc175d41caa874c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): custom resource not found: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.059786072Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476032-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.062466405Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:11:16.06253968Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476062-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:11:16.065986915Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993476062-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.066012087Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.066019504Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476045-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.066021833Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:11:16.06605918Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476055-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.066021418Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:11:16.066097213Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476062-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.066037365Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476062-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.066045636Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"28899ee3-3d30-49c4-bf10-069da00eada2\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:11:16.059831106Z\"}","scope":"coa.runtime","time":"2025-01-16T02:11:16.066204429Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 get 2025-01-16 02:11:16.037782722 +0000 UTC m=+412.004246621 0001-01-01 00:00:00 +0000 UTC 2 1 {1 0 0 0 map[]  3 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28899ee3-3d30-49c4-bf10-069da00eada2 1 2025-01-16 02:11:16.059831106 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:11:16.066308422Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.066347711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.066357243Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.06636323Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vget\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 get 2025-01-16 02:11:16.037782722 +0000 UTC m=+412.004246621 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  3 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.066394103Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:11:16.066415487Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleGetPlanCompletetion:343","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to get current state %v\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 get 2025-01-16 02:11:16.037782722 +0000 UTC m=+412.004246621 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  3 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.066455658Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1285","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Compute current state %v for Plan ID: %s{[] [] map[]}28899ee3-3d30-49c4-bf10-069da00eada2","scope":"coa.runtime","time":"2025-01-16T02:11:16.066479627Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.066500954Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476049-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.069317984Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.06935493Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:11:16.069408989Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1288","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get previous desired state %+v\u003cnil\u003e","scope":"coa.runtime","time":"2025-01-16T02:11:16.06944055Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1296","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get current desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.069488381Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1301","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.069521346Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1309","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get merged state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.069550621Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to publish topic to deployment plan %v merged state %v get plan %v\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 get 2025-01-16 02:11:16.037782722 +0000 UTC m=+412.004246621 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  3 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc00046a910} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000c493b0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000638800}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {[{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.06966415Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476069-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.073441413Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476069-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.07346866Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993476069-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.0734764Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.073549088Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476069-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.073587329Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:11:16.073834625Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.074084722Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.07410861Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.074115661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s28899ee3-3d30-49c4-bf10-069da00eada2","scope":"coa.runtime","time":"2025-01-16T02:11:16.074121617Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"58e85239faed6885","traceId":"7f52c1ce44922ebdd24cef6adb93b7e8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:11:16.074141741Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"e473f69ec85a9de8","traceId":"bae6827a3ca29062f92228e7c8e4dabd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.074166102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b14b0cc53a1718dc","traceId":"bae6827a3ca29062f92228e7c8e4dabd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.074187137Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476062-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.077328056Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.077375365Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ed02beb39dc5776d","traceId":"dcaec08459a471f7373b665358117c1b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.077490824Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:184","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ed02beb39dc5776d","traceId":"dcaec08459a471f7373b665358117c1b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v0container","scope":"coa.runtime","time":"2025-01-16T02:11:16.081028413Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ed02beb39dc5776d","traceId":"dcaec08459a471f7373b665358117c1b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28899ee3-3d30-49c4-bf10-069da00eada20","scope":"coa.runtime","time":"2025-01-16T02:11:16.08106225Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476081-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.085610974Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993476081-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.085648751Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.085656686Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476081-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.08568643Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476081-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.085611389Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ed02beb39dc5776d","traceId":"dcaec08459a471f7373b665358117c1b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v28899ee3-3d30-49c4-bf10-069da00eada2","scope":"coa.runtime","time":"2025-01-16T02:11:16.085759197Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ed02beb39dc5776d","traceId":"dcaec08459a471f7373b665358117c1b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:11:16.085864828Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d31380}","scope":"coa.runtime","time":"2025-01-16T02:11:16.086092812Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:11:16.086110089Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:11:16.086114974Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.086121433Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:11:16.086125992Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c2b8a871e9290b92","traceId":"5165568de886fde5f94c3486ef285341"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.086143975Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:849","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b09211e32d21ad0c","traceId":"acd8b5dce8ef3892d37ee2aabe0faaa0"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): applying artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.086311348Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:876","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b09211e32d21ad0c","traceId":"acd8b5dce8ef3892d37ee2aabe0faaa0"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s Target): dryRun is enabled,, skipping apply","scope":"providers.target.k8s","time":"2025-01-16T02:11:16.086333074Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476069-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.089132751Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.089185019Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476089-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.092642255Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993476089-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.09272276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.092734717Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476089-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.092667393Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476089-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.092807136Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"28899ee3-3d30-49c4-bf10-069da00eada2\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:11:16.086345729Z\"}","scope":"coa.runtime","time":"2025-01-16T02:11:16.093094698Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 apply 2025-01-16 02:11:16.074077289 +0000 UTC m=+412.040541186 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 2 0 map[]  3 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588640} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000e16900 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f02c00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28899ee3-3d30-49c4-bf10-069da00eada2 0 2025-01-16 02:11:16.086345729 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:11:16.09334654Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.093443517Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.093471455Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.09348403Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.093497732Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:300","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v1yaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:11:16.093518226Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s28899ee3-3d30-49c4-bf10-069da00eada21","scope":"coa.runtime","time":"2025-01-16T02:11:16.093531829Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476081-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.096994498Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.097030845Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476096-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.100531675Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993476096-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.100560292Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.100569041Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476096-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.10060429Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476096-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:11:16.100531676Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.100663873Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:11:16.100695118Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"0f5a64deb748f0dd","traceId":"8932ecae92f1c2e6e6a7feb3bccd9323"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.100718473Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"54847016770a145d","traceId":"8932ecae92f1c2e6e6a7feb3bccd9323"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.100741787Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:11:16.100789053Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"bb2411b214413559","traceId":"039af4798736213ee0c2fcd2ec3efc6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.100912792Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000d22680}","scope":"coa.runtime","time":"2025-01-16T02:11:16.101032869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:11:16.10105187Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:11:16.101057213Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:11:16.101062967Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:11:16.101068022Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"e5c5556fcf1c205f","traceId":"79aa472f0d1257699c99191e28323c49"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.101091093Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"31affb1d46996955","traceId":"f3f5afbec9a968c4408e722f2ce5dcff"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target):  applying artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.101257297Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:398","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"31affb1d46996955","traceId":"f3f5afbec9a968c4408e722f2ce5dcff"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Kubectl Target): dryRun is enabled,, skipping apply","scope":"providers.target.kubectl","time":"2025-01-16T02:11:16.101295374Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993476104-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.107716683Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993476104-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:11:16.107753955Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993476104-0","scope":"coa.runtime","time":"2025-01-16T02:11:16.107776784Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:11:16.107800394Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993476104-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.107838403Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"28899ee3-3d30-49c4-bf10-069da00eada2\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:11:16.101311629Z\"}","scope":"coa.runtime","time":"2025-01-16T02:11:16.107907321Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 apply 2025-01-16 02:11:16.074077289 +0000 UTC m=+412.040541186 0001-01-01 00:00:00 +0000 UTC 2 1 {1 1 2 0 map[defaulttarget:{OK  map[]}]  3 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588640} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000e16900 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f02c00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 28899ee3-3d30-49c4-bf10-069da00eada2 1 2025-01-16 02:11:16.101311629 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:11:16.108026696Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.108059533Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.108067449Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.108072644Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.108079102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.108086509Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:11:16.10809809Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"e414ee4500a6caa8","traceId":"4600b6bf8c51d13cbd7f4f0762a2366a"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.108126195Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d5be3a655a2f1098","traceId":"4600b6bf8c51d13cbd7f4f0762a2366a"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.108142704Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476089-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.111035704Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:11:16.111069378Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476096-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.11434381Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:11:16.114380596Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"765a935b81e9f685","traceId":"1140142e74b0ff24b4a5227e358931fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.114344426Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"765a935b81e9f685","traceId":"1140142e74b0ff24b4a5227e358931fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vapply\u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 apply 2025-01-16 02:11:16.074077289 +0000 UTC m=+412.040541186 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  3 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588640} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000e16900 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f02c00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.117859378Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"765a935b81e9f685","traceId":"1140142e74b0ff24b4a5227e358931fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:11:16.117904219Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1329","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"765a935b81e9f685","traceId":"1140142e74b0ff24b4a5227e358931fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"handle plan completetion:begin to handle plan completetion \u0026{ 28899ee3-3d30-49c4-bf10-069da00eada2 apply 2025-01-16 02:11:16.074077289 +0000 UTC m=+412.040541186 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  3 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588640} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000e16900 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f02c00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:11:16.117967864Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"765a935b81e9f685","traceId":"1140142e74b0ff24b4a5227e358931fd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:11:16.117994815Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fb029e27f3d30933","traceId":"da97e4dc8487e50bd551038e5d9898a1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.118010931Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"11a18f765e79b248","traceId":"da97e4dc8487e50bd551038e5d9898a1"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.118030177Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"617fe72e824da9ac","traceId":"f71cd7b5188ae894d3046a4b2da657ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.118205103Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1334","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"617fe72e824da9ac","traceId":"f71cd7b5188ae894d3046a4b2da657ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.122005183Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1336","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"617fe72e824da9ac","traceId":"f71cd7b5188ae894d3046a4b2da657ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"if it is dry run %+vtrue","scope":"coa.runtime","time":"2025-01-16T02:11:16.122050373Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1337","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"617fe72e824da9ac","traceId":"f71cd7b5188ae894d3046a4b2da657ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get dep %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000588640} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:3 instance.solution.symphony/started-at:2025-01-16T02:11:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:ca3e6664-79f2-4961-ab99-916daba774b8 management.azure.com/runningCorrelationId:ca3e6664-79f2-4961-ab99-916daba774b8]} 0xc000e16900 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f02c00}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 3 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:11:16.122091462Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"617fe72e824da9ac","traceId":"f71cd7b5188ae894d3046a4b2da657ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 3, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:11:16.122134366Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"e277411d77f6a4f1","traceId":"613581d469495810854d7854f473f136"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:16.122164964Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"86a419878dc8f0e3","traceId":"613581d469495810854d7854f473f136"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.122186918Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fd477f12ae345b0c","traceId":"6dff68ecbf0140995e04f5096eeaf078"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:16.122400073Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1374","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fd477f12ae345b0c","traceId":"6dff68ecbf0140995e04f5096eeaf078"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"final unlock %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.125911489Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:11:16.125957718Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:11:16.125983742Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539196469023061 232044587245 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:11:16.12599567Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).UnlockObject:1321","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fd477f12ae345b0c","traceId":"6dff68ecbf0140995e04f5096eeaf078"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"unlock %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:16.126002498Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993476104-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:11:16.129460668Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:11:16.12951529Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:24.126050042Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:24.126347591Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:11:26.014956806Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:11:26.015027886Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ae97f8897dfa53e7","traceId":"1c00e8701a40d52bdb9c6b4321d379e7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:11:26.018119055Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e3969a085562a6d8","traceId":"1c00e8701a40d52bdb9c6b4321d379e7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:11:26.018195063Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e35bb3398b62e1d4","traceId":"1c00e8701a40d52bdb9c6b4321d379e7"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:11:26.018226977Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:39.126396753Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:39.126427074Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:54.126173141Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:11:54.126414496Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:09.125944634Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:09.12598094Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:24.126037367Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:24.126288084Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:39.126672224Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:39.126781734Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:54.125960304Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:12:54.126347984Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:09.126119873Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:09.126182498Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:24.126501744Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:24.126508205Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:39.126817496Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:39.12684357Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:54.126385401Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:13:54.126409941Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:09.126779274Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:09.12708436Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:14:16.060367578Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:14:16.060400286Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"be00a3c3272b528e","traceId":"cf58a14b904cd57fafecbea5d30c0c52"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.06306304Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"8a971445adbe1a36","traceId":"cf58a14b904cd57fafecbea5d30c0c52"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.063107522Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"57719a2e5679e4dd","traceId":"cf58a14b904cd57fafecbea5d30c0c52"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.063121666Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:14:16.069407765Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:14:16.069439993Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"766651068e704455","traceId":"1c43e5a48ae4cd5f009d29bc325774ce"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: POST, ","scope":"coa.runtime","time":"2025-01-16T02:14:16.070715328Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656071-0, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:14:16.074878642Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic job, group , messages 1736993656071-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.074922006Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic job","scope":"coa.runtime","time":"2025-01-16T02:14:16.074933438Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656071-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:14:16.07497946Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656071-0 for topic job","scope":"coa.runtime","time":"2025-01-16T02:14:16.074900115Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:425","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"6d02a6cf3775f12b","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): handling job event objectType: deployment, job action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:14:16.075146864Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:274","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e30945545e58c5ad","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): get state h_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:14:16.07518371Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Get:290","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e30945545e58c5ad","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Memory State): failed to get h_defaultinstance state: Not Found: entry 'h_defaultinstance' is not found in namespace default","scope":"coa.runtime","time":"2025-01-16T02:14:16.075200136Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).DelayOrSkipJob:346","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e30945545e58c5ad","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Job): heartbeat h_defaultinstance is not found","scope":"coa.runtime","time":"2025-01-16T02:14:16.075249656Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:576","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e30945545e58c5ad","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment job defaultinstance, action: UPDATE","scope":"coa.runtime","time":"2025-01-16T02:14:16.075279673Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/jobs.(*JobsManager).HandleJobEvent:578","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"e30945545e58c5ad","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Job): handling deployment spec: {\"solutionName\":\"defaultsolution-v-v1\",\"solution\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultsolution-v-v1\",\"labels\":{\"rootResource\":\"defaultsolution\"},\"annotations\":{\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Solution\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultsolution-v-v1\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"sample-prometheus-server\\\",\\\"properties\\\":{\\\"container.image\\\":\\\"prom/prometheus\\\",\\\"container.imagePullPolicy\\\":\\\"Always\\\",\\\"container.ports\\\":\\\"[{\\\\\\\"containerPort\\\\\\\":9090,\\\\\\\"protocol\\\\\\\":\\\\\\\"TCP\\\\\\\"}]\\\",\\\"container.resources\\\":\\\"{\\\\\\\"requests\\\\\\\":{\\\\\\\"cpu\\\\\\\":\\\\\\\"1\\\\\\\",\\\\\\\"memory\\\\\\\":\\\\\\\"100Mi\\\\\\\"}}\\\"},\\\"type\\\":\\\"container\\\"},{\\\"name\\\":\\\"conditional-activation-deployment\\\",\\\"properties\\\":{\\\"resource\\\":{\\\"apiVersion\\\":\\\"apps/v1\\\",\\\"kind\\\":\\\"Deployment\\\",\\\"metadata\\\":{\\\"labels\\\":{\\\"application\\\":\\\"testapp\\\",\\\"version\\\":\\\"1\\\"},\\\"name\\\":\\\"testapp\\\"},\\\"spec\\\":{\\\"replicas\\\":1,\\\"selector\\\":{\\\"matchLabels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"template\\\":{\\\"metadata\\\":{\\\"labels\\\":{\\\"app\\\":\\\"testapp\\\"}},\\\"spec\\\":{\\\"containers\\\":[{\\\"command\\\":[\\\"/bin/sleep\\\",\\\"10000\\\"],\\\"image\\\":\\\"k8s.gcr.io/e2e-test-images/busybox:1.29\\\",\\\"name\\\":\\\"busybox\\\"}],\\\"nodeSelector\\\":{\\\"kubernetes.io/os\\\":\\\"linux\\\"},\\\"volumes\\\":[{\\\"configMap\\\":{\\\"name\\\":\\\"conditional-activation-config\\\"},\\\"name\\\":\\\"config\\\"}]}}}}},\\\"type\\\":\\\"yaml.k8s\\\"}],\\\"displayName\\\":\\\"defaultsolution-v-v1\\\",\\\"rootResource\\\":\\\"defaultsolution\\\"}}\\n\"}},\"spec\":{\"displayName\":\"defaultsolution-v-v1\",\"components\":[{\"name\":\"sample-prometheus-server\",\"type\":\"container\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"}},{\"name\":\"conditional-activation-deployment\",\"type\":\"yaml.k8s\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}}}]}},\"instance\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaultinstance\",\"labels\":{\"solution\":\"defaultsolution-v-v1\",\"target\":\"defaulttarget\"},\"annotations\":{\"SummaryJobIdKey\":\"4\",\"instance.solution.symphony/started-at\":\"2025-01-16T02:14:16Z\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"solution.symphony/v1\\\",\\\"kind\\\":\\\"Instance\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaultinstance\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"displayName\\\":\\\"defaultinstance\\\",\\\"isDryRun\\\":true,\\\"reconciliationPolicy\\\":{\\\"interval\\\":\\\"3m\\\",\\\"state\\\":\\\"active\\\"},\\\"scope\\\":\\\"defaultscope\\\",\\\"solution\\\":\\\"defaultsolution:v1\\\",\\\"target\\\":{\\\"name\\\":\\\"defaulttarget\\\"}}}\\n\",\"management.azure.com/correlationId\":\"fe7fb414-c942-463a-97bd-2b44cdf14a4d\",\"management.azure.com/runningCorrelationId\":\"fe7fb414-c942-463a-97bd-2b44cdf14a4d\"}},\"spec\":{\"displayName\":\"defaultinstance\",\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"}},\"targets\":{\"defaulttarget\":{\"metadata\":{\"namespace\":\"default\",\"name\":\"defaulttarget\",\"annotations\":{\"SummaryJobIdKey\":\"1\",\"kubectl.kubernetes.io/last-applied-configuration\":\"{\\\"apiVersion\\\":\\\"fabric.symphony/v1\\\",\\\"kind\\\":\\\"Target\\\",\\\"metadata\\\":{\\\"annotations\\\":{},\\\"name\\\":\\\"defaulttarget\\\",\\\"namespace\\\":\\\"default\\\"},\\\"spec\\\":{\\\"components\\\":[{\\\"name\\\":\\\"nginx\\\",\\\"properties\\\":{\\\"chart\\\":{\\\"name\\\":\\\"nginx\\\",\\\"repo\\\":\\\"https://charts.bitnami.com/bitnami\\\",\\\"version\\\":\\\"18.1.7\\\"}},\\\"type\\\":\\\"helm.v3\\\"}],\\\"displayName\\\":\\\"defaulttarget\\\",\\\"isDryRun\\\":true,\\\"scope\\\":\\\"defaultscope\\\",\\\"topologies\\\":[{\\\"bindings\\\":[{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.k8s\\\",\\\"role\\\":\\\"instance\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.helm\\\",\\\"role\\\":\\\"helm.v3\\\"},{\\\"config\\\":{\\\"inCluster\\\":\\\"true\\\"},\\\"provider\\\":\\\"providers.target.kubectl\\\",\\\"role\\\":\\\"yaml.k8s\\\"}]}]}}\\n\",\"management.azure.com/correlationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"management.azure.com/runningCorrelationId\":\"14f38f49-05dd-4f0d-b19c-c6a20ac07244\",\"target.fabric.symphony/started-at\":\"2025-01-16T02:05:15Z\"}},\"status\":{\"provisioningStatus\":{\"operationId\":\"\",\"status\":\"\",\"error\":{}},\"lastModified\":\"0001-01-01T00:00:00Z\"},\"spec\":{\"displayName\":\"defaulttarget\",\"scope\":\"defaultscope\",\"components\":[{\"name\":\"nginx\",\"type\":\"helm.v3\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}}}],\"topologies\":[{\"bindings\":[{\"role\":\"instance\",\"provider\":\"providers.target.k8s\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"helm.v3\",\"provider\":\"providers.target.helm\",\"config\":{\"inCluster\":\"true\"}},{\"role\":\"yaml.k8s\",\"provider\":\"providers.target.kubectl\",\"config\":{\"inCluster\":\"true\"}}]}]}}},\"assignments\":{\"defaulttarget\":\"{sample-prometheus-server}{conditional-activation-deployment}\"},\"generation\":\"1\",\"jobID\":\"4\",\"objectNamespace\":\"default\",\"hash\":\"1760ee01b198a8ca24a21518b3dd4775\",\"isDryRun\":true}","scope":"coa.runtime","time":"2025-01-16T02:14:16.075293672Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:14:16.0756919Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:14:16.075705654Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:761","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"4dbb383d3f731207","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onReconcile, method: POST","scope":"coa.runtime","time":"2025-01-16T02:14:16.077209746Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).Lock:112","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Trying to init lock a memoryKeyLockdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.077360816Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:784","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"a4889899d75e58d1","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock succeed %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.077379442Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:793","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"a4889899d75e58d1","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000a85d10} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc00087bd40 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000445100}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:14:16.077409399Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:794","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"a4889899d75e58d1","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): reconciling deployment.InstanceName: defaultinstance, deployment.SolutionName: defaultsolution-v-v1, remove: false, namespace: default, targetName: , generation: 1, jobID: 4","scope":"coa.runtime","time":"2025-01-16T02:14:16.07743425Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"488bd0eea6727a0f","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.077448337Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"488bd0eea6727a0f","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:14:16.077621079Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"488bd0eea6727a0f","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:14:16.077657102Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"c76039ffddedf23e","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.07767082Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"1a75a9d698b9e362","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.077682272Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.077814817Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/utils.EvaluateDeployment:1340","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" (Parser): Evaluate deployment completed.","scope":"coa.runtime","time":"2025-01-16T02:14:16.08411915Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onReconcile:886","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"publish topic for object %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.084159525Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656084-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.0941603Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993656084-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.094203375Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656084-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.094203284Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.094230234Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656084-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.094299529Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/memorystate.(*MemoryStateProvider).Upsert:94","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"53c7a5e03441fe93","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Memory State): upsert states d_defaultinstance in namespace default","scope":"coa.runtime","time":"2025-01-16T02:14:16.094422523Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.094496589Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.094750867Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.094780413Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.094787823Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s05cb1170-a36a-4832-a6ba-f76f8b86cab4","scope":"coa.runtime","time":"2025-01-16T02:14:16.094794533Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ad40f08a56ccf56d","traceId":"b6915707b789be5890d668e9825caded"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:14:16.094831682Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"420f36c25dbdbcbc","traceId":"94da5dcf347dc31eefbb11ae77268dfd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.09485884Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"8496b75cee550484","traceId":"94da5dcf347dc31eefbb11ae77268dfd"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.094877406Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656071-0 for topic job, group ","scope":"coa.runtime","time":"2025-01-16T02:14:16.098240977Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message job, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.098273933Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.098356378Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:14:16.101588022Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s05cb1170-a36a-4832-a6ba-f76f8b86cab40","scope":"coa.runtime","time":"2025-01-16T02:14:16.101622952Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656101-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.105419093Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656101-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.105440423Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:172","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"phase get begin deployment %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:14:16.105495097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s05cb1170-a36a-4832-a6ba-f76f8b86cab41","scope":"coa.runtime","time":"2025-01-16T02:14:16.105522734Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993656101-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.105443603Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.10556139Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656101-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.105614186Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:14:16.105776223Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000f03980}","scope":"coa.runtime","time":"2025-01-16T02:14:16.105980226Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:14:16.105997789Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:14:16.10600298Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.106009441Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:14:16.106015039Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c23b9344364978ba","traceId":"ee5fd639783a89e9031c4cb245406a4b"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.106035076Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Get:339","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"ef943af1b3e7fd64","traceId":"246fd030746b006f6a3a7c560284bf66"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.106209884Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).getDeployment:279","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"586d9e6c99f9c692","traceId":"246fd030746b006f6a3a7c560284bf66"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): getDeployment scope - defaultscope, name - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.106229784Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656105-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:14:16.109484196Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993656105-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.109515674Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.109529856Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656105-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.109564928Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656105-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.109514403Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v05cb1170-a36a-4832-a6ba-f76f8b86cab4","scope":"coa.runtime","time":"2025-01-16T02:14:16.109638584Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"86a6368a4f34cad0","traceId":"b164fe0b68f3c7d995ef6b5e97eda65c"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:14:16.10974971Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc001000a00}","scope":"coa.runtime","time":"2025-01-16T02:14:16.109993582Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:14:16.110013805Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:14:16.110019573Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:14:16.110026092Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:14:16.110031242Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40fd603857cdb65e","traceId":"6b0021477c2c906d4d17f01fe274472e"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.110053335Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:281","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"b0809353e1049ceb","traceId":"896f520fd03c5c39c5cf8340379d4ce5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): getting artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.110247557Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656109-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:14:16.112864324Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656109-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.112886869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993656109-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.112890612Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.112976853Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656109-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.113028648Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":null,\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"05cb1170-a36a-4832-a6ba-f76f8b86cab4\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:14:16.107684536Z\"}","scope":"coa.runtime","time":"2025-01-16T02:14:16.113076537Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 get 2025-01-16 02:14:16.094739959 +0000 UTC m=+592.061203857 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 0 0 map[]  4 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 05cb1170-a36a-4832-a6ba-f76f8b86cab4 0 2025-01-16 02:14:16.107684536 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:14:16.113176542Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.113207222Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.11321565Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.113223235Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).getCustomResource:992","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"b0809353e1049ceb","traceId":"896f520fd03c5c39c5cf8340379d4ce5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"error","msg":"  P (Kubectl Target): failed to read object: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.113920804Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Get:340","diagnostics":{"correlationId":"ca3e6664-79f2-4961-ab99-916daba774b8","resourceId":"","traceContext":{"spanId":"b0809353e1049ceb","traceId":"896f520fd03c5c39c5cf8340379d4ce5"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): custom resource not found: deployments.apps \"testapp\" not found","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.113952046Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656084-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.116866195Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:14:16.116898123Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656109-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.122973538Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656116-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.122973372Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656101-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.122980286Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656116-0, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:14:16.122997752Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993656116-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.123128757Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.123152844Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656116-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.123187667Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 17","scope":"coa.runtime","time":"2025-01-16T02:14:16.123222445Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:14:16.123234775Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":{},\"planId\":\"05cb1170-a36a-4832-a6ba-f76f8b86cab4\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:14:16.114008906Z\"}","scope":"coa.runtime","time":"2025-01-16T02:14:16.12324899Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 get 2025-01-16 02:14:16.094739959 +0000 UTC m=+592.061203857 0001-01-01 00:00:00 +0000 UTC 2 1 {1 0 0 0 map[]  4 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 05cb1170-a36a-4832-a6ba-f76f8b86cab4 1 2025-01-16 02:14:16.114008906 +0000 UTC [] map[]  defaulttarget}get","scope":"coa.runtime","time":"2025-01-16T02:14:16.123365044Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.123395128Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.123405617Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.123410981Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vget\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 get 2025-01-16 02:14:16.094739959 +0000 UTC m=+592.061203857 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  4 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.123440063Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:14:16.123461329Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleGetPlanCompletetion:343","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to get current state %v\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 get 2025-01-16 02:14:16.094739959 +0000 UTC m=+592.061203857 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  4 false false true} {[] [] map[]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.123508986Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1285","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Compute current state %v for Plan ID: %s{[] [] map[]}05cb1170-a36a-4832-a6ba-f76f8b86cab4","scope":"coa.runtime","time":"2025-01-16T02:14:16.123532105Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state defaultinstance with keyPrefix DeployState.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.123552009Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656105-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.129316882Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.129368596Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetPreviousState:193","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): failed to get previous state for instance defaultinstance in namespace default: Not Found: state defaultinstance not found","scope":"coa.runtime","time":"2025-01-16T02:14:16.129404869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1288","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get previous desired state %+v\u003cnil\u003e","scope":"coa.runtime","time":"2025-01-16T02:14:16.129432246Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1296","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get current desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.129494516Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1301","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Get desired state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.129527192Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1309","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get merged state %+v{[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.129555023Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).threeStateMerge:1315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Begin to publish topic to deployment plan %v merged state %v get plan %v\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 get 2025-01-16 02:14:16.094739959 +0000 UTC m=+592.061203857 0001-01-01 00:00:00 +0000 UTC 2 2 {1 0 0 0 map[]  4 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000589680} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc0004cf560 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000915600}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {[{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.129665332Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656130-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.133369204Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656130-0 for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.133392652Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-plan, group stage-vendor, messages 1736993656130-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.133433774Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.133458262Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656130-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.133484097Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func2:114","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): Begin to execute deployment-plan","scope":"coa.runtime","time":"2025-01-16T02:14:16.133745272Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.133996172Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.134015577Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.13402177Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:159","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %s05cb1170-a36a-4832-a6ba-f76f8b86cab4","scope":"coa.runtime","time":"2025-01-16T02:14:16.134028753Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"b5b94f3f089595e1","traceId":"8f429183998c4fd318d4508764ba23dc"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 0","scope":"coa.runtime","time":"2025-01-16T02:14:16.134039713Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"59a7da234465b255","traceId":"70ff0e024a3f69496768024e316fe1fa"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.134067517Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d738ff17743f51b1","traceId":"70ff0e024a3f69496768024e316fe1fa"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.13408908Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656116-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.136660901Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.136693532Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6e81e74ce10b8f3e","traceId":"39c63ba705aa49b1b9489750985ec8a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.136786281Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:184","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6e81e74ce10b8f3e","traceId":"39c63ba705aa49b1b9489750985ec8a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v0container","scope":"coa.runtime","time":"2025-01-16T02:14:16.140218661Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6e81e74ce10b8f3e","traceId":"39c63ba705aa49b1b9489750985ec8a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s05cb1170-a36a-4832-a6ba-f76f8b86cab40","scope":"coa.runtime","time":"2025-01-16T02:14:16.140259033Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656140-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.144481326Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993656140-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.144516153Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656140-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.144515007Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656140-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.144541527Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleDeploymentPlan:190","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6e81e74ce10b8f3e","traceId":"39c63ba705aa49b1b9489750985ec8a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): store plan id %s in map %+v05cb1170-a36a-4832-a6ba-f76f8b86cab4","scope":"coa.runtime","time":"2025-01-16T02:14:16.144547231Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.144537276Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"6e81e74ce10b8f3e","traceId":"39c63ba705aa49b1b9489750985ec8a8"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:14:16.14475235Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc00107e080}","scope":"coa.runtime","time":"2025-01-16T02:14:16.145440555Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:14:16.145508805Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:14:16.145548305Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %sinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.145573163Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:14:16.145630118Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Init:188","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"9d0c6b2e7208a33f","traceId":"68565599eb3a0b50809b207d832d56cf"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): Init()","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.145731418Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:849","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c37ec19331fa0092","traceId":"d40bcb13946eaa921439f9cdec4a23bb"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (K8s Target): applying artifacts: defaultscope - defaultinstance","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.146194898Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/k8s.(*K8sTargetProvider).Apply:876","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c37ec19331fa0092","traceId":"d40bcb13946eaa921439f9cdec4a23bb"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (K8s Target): dryRun is enabled,, skipping apply","scope":"providers.target.k8s","time":"2025-01-16T02:14:16.146222084Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656130-0 for topic deployment-plan, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.148378609Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-plan, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.148543396Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656148-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.151810407Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656148-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.151838677Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993656148-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.151846761Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.151941829Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656148-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.151960752Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"05cb1170-a36a-4832-a6ba-f76f8b86cab4\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":0,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:14:16.146236867Z\"}","scope":"coa.runtime","time":"2025-01-16T02:14:16.152019549Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 apply 2025-01-16 02:14:16.133989905 +0000 UTC m=+592.100453812 0001-01-01 00:00:00 +0000 UTC 2 0 {1 0 2 0 map[]  4 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000fdeaa0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc000da9dd0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000fe3300}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 05cb1170-a36a-4832-a6ba-f76f8b86cab4 0 2025-01-16 02:14:16.146236867 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:14:16.152157976Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.152201727Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.152211638Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.152218022Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.152225572Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:300","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): publish deployment step id %s step %+v1yaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:14:16.152234758Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).publishDeploymentStep:195","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(StageVendor): publish deployment step for PlanId %s StepId %s05cb1170-a36a-4832-a6ba-f76f8b86cab41","scope":"coa.runtime","time":"2025-01-16T02:14:16.152249225Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656140-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.155549688Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.155607601Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656155-0, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.1613659Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic deployment-step, group Solution-vendor, messages 1736993656155-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.161394083Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.161401703Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656155-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.161455286Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656155-0 for topic deployment-step","scope":"coa.runtime","time":"2025-01-16T02:14:16.16149748Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.161546536Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:14:16.161597439Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).Init.func1:90","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): subscribe deployment-step and begin to apply step ","scope":"coa.runtime","time":"2025-01-16T02:14:16.161662711Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"d4b12f3b1b9953a5","traceId":"5ed58d9a48e89625394cea52ff058915"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.161666559Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"c1a19eccae09a5f1","traceId":"5ed58d9a48e89625394cea52ff058915"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.161817783Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:496","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %s, %+vdefaulttarget{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000b83800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.161923484Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:498","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"compare between state and target name %+v, %s{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}nginx","scope":"coa.runtime","time":"2025-01-16T02:14:16.161941993Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.findAgentFromDeploymentState:503","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" it is not remote call target Name %sdefaulttarget","scope":"coa.runtime","time":"2025-01-16T02:14:16.1619475Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:159","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get step role %syaml.k8s","scope":"coa.runtime","time":"2025-01-16T02:14:16.161953782Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetTargetProviderForStep:163","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get target providers %+vmap[]","scope":"coa.runtime","time":"2025-01-16T02:14:16.161959818Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Init:158","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ca7547eadacc89b8","traceId":"0481c0d8e9a9e3d9cb37ca07e7403987"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target): Init()","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.16197483Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"751a4edf0f7e6d89","traceId":"1c4540f4e09b6d5ec11c966de3a615c3"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.162043008Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"910b4ef44292d443","traceId":"7c21bde0eea18054c9342c7923fc3952"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Kubectl Target):  applying artifacts: defaultscope - defaultinstance","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.162143475Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/providers/target/kubectl.(*KubectlTargetProvider).Apply:398","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"910b4ef44292d443","traceId":"7c21bde0eea18054c9342c7923fc3952"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Kubectl Target): dryRun is enabled,, skipping apply","scope":"providers.target.kubectl","time":"2025-01-16T02:14:16.162166252Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).Publish:180","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : published message 1736993656165-0 for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.168674489Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ClaimWorker:430","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : claimWorker for message 1736993656165-0, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:14:16.168688019Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:245","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : new message for topic step-result, group stage-vendor, messages 1736993656165-0","scope":"coa.runtime","time":"2025-01-16T02:14:16.168736025Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).pollNewMessages:251","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processed pollnewmessages for topic step-result","scope":"coa.runtime","time":"2025-01-16T02:14:16.168744091Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:313","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing message 1736993656165-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.168758969Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleStepResult:403","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Received event body: {\"GetResult\":[],\"Target\":\"defaulttarget\",\"components\":null,\"planId\":\"05cb1170-a36a-4832-a6ba-f76f8b86cab4\",\"step\":{\"Components\":null,\"IsFirst\":false,\"Role\":\"\",\"Target\":\"\"},\"stepId\":1,\"targetResult\":{\"status\":\"\"},\"timestamp\":\"2025-01-16T02:14:16.162177914Z\"}","scope":"coa.runtime","time":"2025-01-16T02:14:16.168846869Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:262","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Update plan state %v with step result %v phase %s\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 apply 2025-01-16 02:14:16.133989905 +0000 UTC m=+592.100453812 0001-01-01 00:00:00 +0000 UTC 2 1 {1 1 2 0 map[defaulttarget:{OK  map[]}]  4 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000fdeaa0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc000da9dd0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000fe3300}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]} {{ []  false} {  map[]} 05cb1170-a36a-4832-a6ba-f76f8b86cab4 1 2025-01-16 02:14:16.162177914 +0000 UTC [] map[]  defaulttarget}apply","scope":"coa.runtime","time":"2025-01-16T02:14:16.168983487Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.16901555Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.169025723Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.16903196Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:292","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Update plan state target spec %v{OK  map[]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.169038245Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).saveStepResult:315","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.169045574Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"","traceId":""}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=1), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:14:16.169065472Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"aea166528e18d43a","traceId":"4510177be0ce98697c46fd8537215ebe"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.169082891Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"83f093d9a1f3f2e0","traceId":"4510177be0ce98697c46fd8537215ebe"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.169102444Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656148-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.172276387Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 18","scope":"coa.runtime","time":"2025-01-16T02:14:16.172327267Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656155-0 for topic deployment-step, group Solution-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.175695726Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message deployment-step, remaining 19","scope":"coa.runtime","time":"2025-01-16T02:14:16.175723172Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a749189faf5d3039","traceId":"9445437ccc6fb494d01ff21cbde49067"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.175709288Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:371","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a749189faf5d3039","traceId":"9445437ccc6fb494d01ff21cbde49067"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state %s is completed %vapply\u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 apply 2025-01-16 02:14:16.133989905 +0000 UTC m=+592.100453812 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  4 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000fdeaa0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc000da9dd0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000fe3300}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.179256933Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handlePlanComplete:375","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a749189faf5d3039","traceId":"9445437ccc6fb494d01ff21cbde49067"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V(Solution): Plan state is completed %vtrue","scope":"coa.runtime","time":"2025-01-16T02:14:16.179295874Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1329","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a749189faf5d3039","traceId":"9445437ccc6fb494d01ff21cbde49067"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"handle plan completetion:begin to handle plan completetion \u0026{ 05cb1170-a36a-4832-a6ba-f76f8b86cab4 apply 2025-01-16 02:14:16.133989905 +0000 UTC m=+592.100453812 0001-01-01 00:00:00 +0000 UTC 2 2 {1 1 2 0 map[defaulttarget:{OK  map[]}]  4 false false true} {[{sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []} {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}] [{defaulttarget {defaulttarget defaultscope map[] map[] [{nginx helm.v3 map[] map[chart:map[name:nginx repo:https://charts.bitnami.com/bitnami version:18.1.7]] map[] []  [] [] []}]  [{ map[] [{instance providers.target.k8s map[inCluster:true]} {helm.v3 providers.target.helm map[inCluster:true]} {yaml.k8s providers.target.kubectl map[inCluster:true]}]}] false false}}] map[conditional-activation-deployment::defaulttarget:yaml.k8s sample-prometheus-server::defaulttarget:container]} {defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000fdeaa0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc000da9dd0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000fe3300}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true} {[] [] map[]} \u003cnil\u003e  map[defaulttarget:1] default false [{0   []  [] } {0   []  [] }] [{defaulttarget [{update {sample-prometheus-server container map[] map[container.image:prom/prometheus container.imagePullPolicy:Always container.ports:[{\"containerPort\":9090,\"protocol\":\"TCP\"}] container.resources:{\"requests\":{\"cpu\":\"1\",\"memory\":\"100Mi\"}}] map[] []  [] [] []}}] container true} {defaulttarget [{update {conditional-activation-deployment yaml.k8s map[] map[resource:map[apiVersion:apps/v1 kind:Deployment metadata:map[labels:map[application:testapp version:1] name:testapp] spec:map[replicas:1 selector:map[matchLabels:map[app:testapp]] template:map[metadata:map[labels:map[app:testapp]] spec:map[containers:[map[command:[/bin/sleep 10000] image:k8s.gcr.io/e2e-test-images/busybox:1.29 name:busybox]] nodeSelector:map[kubernetes.io/os:linux] volumes:[map[configMap:map[name:conditional-activation-config] name:config]]]]]]] map[] []  [] [] []}}] yaml.k8s true}]}","scope":"coa.runtime","time":"2025-01-16T02:14:16.17936353Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"a749189faf5d3039","traceId":"9445437ccc6fb494d01ff21cbde49067"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:14:16.179389685Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"fa452f8c8496b4b2","traceId":"63b9aec92aea40644c22dea73ea074f4"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.179414308Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"075eec32a1a1b577","traceId":"63b9aec92aea40644c22dea73ea074f4"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.179433917Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40b8e67e57f6382c","traceId":"652f5c73de7dd797e020bc722fe4ed6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.179635088Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1334","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40b8e67e57f6382c","traceId":"652f5c73de7dd797e020bc722fe4ed6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"begin to save summary for %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.183083625Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1336","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40b8e67e57f6382c","traceId":"652f5c73de7dd797e020bc722fe4ed6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"if it is dry run %+vtrue","scope":"coa.runtime","time":"2025-01-16T02:14:16.183126819Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1337","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40b8e67e57f6382c","traceId":"652f5c73de7dd797e020bc722fe4ed6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"get dep %+v{defaultsolution-v-v1 {{default defaultsolution-v-v1  0 map[rootResource:defaultsolution] map[kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Solution\",\"metadata\":{\"annotations\":{},\"name\":\"defaultsolution-v-v1\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"sample-prometheus-server\",\"properties\":{\"container.image\":\"prom/prometheus\",\"container.imagePullPolicy\":\"Always\",\"container.ports\":\"[{\\\"containerPort\\\":9090,\\\"protocol\\\":\\\"TCP\\\"}]\",\"container.resources\":\"{\\\"requests\\\":{\\\"cpu\\\":\\\"1\\\",\\\"memory\\\":\\\"100Mi\\\"}}\"},\"type\":\"container\"},{\"name\":\"conditional-activation-deployment\",\"properties\":{\"resource\":{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"labels\":{\"application\":\"testapp\",\"version\":\"1\"},\"name\":\"testapp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"testapp\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"testapp\"}},\"spec\":{\"containers\":[{\"command\":[\"/bin/sleep\",\"10000\"],\"image\":\"k8s.gcr.io/e2e-test-images/busybox:1.29\",\"name\":\"busybox\"}],\"nodeSelector\":{\"kubernetes.io/os\":\"linux\"},\"volumes\":[{\"configMap\":{\"name\":\"conditional-activation-config\"},\"name\":\"config\"}]}}}}},\"type\":\"yaml.k8s\"}],\"displayName\":\"defaultsolution-v-v1\",\"rootResource\":\"defaultsolution\"}}\n]} 0xc000fdeaa0} {{default defaultinstance  0 map[solution:defaultsolution-v-v1 target:defaulttarget] map[SummaryJobIdKey:4 instance.solution.symphony/started-at:2025-01-16T02:14:16Z kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"solution.symphony/v1\",\"kind\":\"Instance\",\"metadata\":{\"annotations\":{},\"name\":\"defaultinstance\",\"namespace\":\"default\"},\"spec\":{\"displayName\":\"defaultinstance\",\"isDryRun\":true,\"reconciliationPolicy\":{\"interval\":\"3m\",\"state\":\"active\"},\"scope\":\"defaultscope\",\"solution\":\"defaultsolution:v1\",\"target\":{\"name\":\"defaulttarget\"}}}\n management.azure.com/correlationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d management.azure.com/runningCorrelationId:fe7fb414-c942-463a-97bd-2b44cdf14a4d]} 0xc000da9dd0 {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC}} map[defaulttarget:{{default defaulttarget  0 map[] map[SummaryJobIdKey:1 kubectl.kubernetes.io/last-applied-configuration:{\"apiVersion\":\"fabric.symphony/v1\",\"kind\":\"Target\",\"metadata\":{\"annotations\":{},\"name\":\"defaulttarget\",\"namespace\":\"default\"},\"spec\":{\"components\":[{\"name\":\"nginx\",\"properties\":{\"chart\":{\"name\":\"nginx\",\"repo\":\"https://charts.bitnami.com/bitnami\",\"version\":\"18.1.7\"}},\"type\":\"helm.v3\"}],\"displayName\":\"defaulttarget\",\"isDryRun\":true,\"scope\":\"defaultscope\",\"topologies\":[{\"bindings\":[{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.k8s\",\"role\":\"instance\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.helm\",\"role\":\"helm.v3\"},{\"config\":{\"inCluster\":\"true\"},\"provider\":\"providers.target.kubectl\",\"role\":\"yaml.k8s\"}]}]}}\n management.azure.com/correlationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 management.azure.com/runningCorrelationId:14f38f49-05dd-4f0d-b19c-c6a20ac07244 target.fabric.symphony/started-at:2025-01-16T02:05:15Z]} {map[] {  0  false {   []} map[]} 0001-01-01 00:00:00 +0000 UTC} 0xc000fe3300}] [] map[defaulttarget:{sample-prometheus-server}{conditional-activation-deployment}] 0 0  1 4 default 1760ee01b198a8ca24a21518b3dd4775 true}","scope":"coa.runtime","time":"2025-01-16T02:14:16.183164274Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).SaveSummary:673","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"40b8e67e57f6382c","traceId":"652f5c73de7dd797e020bc722fe4ed6f"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Solution): saving summary, objectName: defaultinstance, state: %!s(model.SummaryState=2), namespace: default, jobid: 4, hash 1760ee01b198a8ca24a21518b3dd4775, targetCount 1, successCount 1","scope":"coa.runtime","time":"2025-01-16T02:14:16.183190725Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"47b1261fe8d5803d","traceId":"ff47d8d17ef76608256f18fe145404f0"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:16.183217401Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"8b0e9cd152ab95cb","traceId":"ff47d8d17ef76608256f18fe145404f0"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.183232758Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Upsert:142","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ad9746351f1f4d6e","traceId":"ddff60bd2db81358dd1eb44e347b758d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): upsert states summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:16.18343602Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).handleAllPlanCompletetion:1374","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ad9746351f1f4d6e","traceId":"ddff60bd2db81358dd1eb44e347b758d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"final unlock %sdefaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.18672397Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock:122","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"Current locks:","scope":"coa.runtime","time":"2025-01-16T02:14:16.186769943Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026target-runtime-defaulttarget\u0026{{13968539002821055394 51743889722 0x42c3dc0} default\u0026\u0026target-runtime-defaulttarget {0 0} 0xc000ea8500 0xc000309940}","scope":"coa.runtime","time":"2025-01-16T02:14:16.186786016Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/keylock/memory.(*MemoryKeyLockProvider).TryLock.func1:124","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"lock is default\u0026\u0026defaultinstance\u0026{{13968539389790498675 412092534538 0x42c3dc0} default\u0026\u0026defaultinstance {1 0} 0xc0003094c0 0xc000aae800}","scope":"coa.runtime","time":"2025-01-16T02:14:16.186795756Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).UnlockObject:1321","diagnostics":{"correlationId":"","resourceId":"","traceContext":{"spanId":"ad9746351f1f4d6e","traceId":"ddff60bd2db81358dd1eb44e347b758d"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"unlock %sdefault\u0026\u0026defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:16.186801436Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).processMessage:339","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"  P (Redis PubSub) : processing succeeded for message 1736993656165-0 for topic step-result, group stage-vendor","scope":"coa.runtime","time":"2025-01-16T02:14:16.190396606Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/pubsub/redis.(*RedisPubSubProvider).ReleaseWorker:439","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis PubSub) : releaseWorker for message step-result, remaining 20","scope":"coa.runtime","time":"2025-01-16T02:14:16.190446825Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:24.126012222Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:24.126350521Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.decodeJWTTokenForIssuer:239","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"Issuer: https://kubernetes.default.svc.cluster.local","scope":"coa.runtime","time":"2025-01-16T02:14:26.064381421Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/bindings/http.JWT.JWT-fm.JWT.JWT.func1:132","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"JWT: Validating token with k8s.","scope":"coa.runtime","time":"2025-01-16T02:14:26.064410313Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/vendors.(*SolutionVendor).onQueue:616","diagnostics":{"correlationId":"fe7fb414-c942-463a-97bd-2b44cdf14a4d","resourceId":"","traceContext":{"spanId":"ba19483b685fcb7f","traceId":"8ca07d0b816017e4e9ace4e93e7f7e74"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":"V (Solution): onQueue, method: GET, defaultinstance","scope":"coa.runtime","time":"2025-01-16T02:14:26.066152844Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/solution.(*SolutionManager).GetSummary:207","diagnostics":{"correlationId":"fe7fb414-c942-463a-97bd-2b44cdf14a4d","resourceId":"","traceContext":{"spanId":"05bff7d88a2ea984","traceId":"8ca07d0b816017e4e9ace4e93e7f7e74"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"info","msg":" M (Solution): get summary, key: defaultinstance, namespace: default","scope":"coa.runtime","time":"2025-01-16T02:14:26.066188563Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/coa/pkg/apis/v1alpha2/providers/states/redisstate.(*RedisStateProvider).Get:291","diagnostics":{"correlationId":"fe7fb414-c942-463a-97bd-2b44cdf14a4d","resourceId":"","traceContext":{"spanId":"b6422878dcbf6d6c","traceId":"8ca07d0b816017e4e9ace4e93e7f7e74"}},"instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":"  P (Redis State): get state summary-defaultinstance with keyPrefix Summary.solution.symphony*default","scope":"coa.runtime","time":"2025-01-16T02:14:26.066203005Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:39.126538481Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:39.126610394Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:54.126532298Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:14:54.12672894Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:15:09.126514807Z","type":"log","ver":"0.48.33"}
{"caller":"github.com/eclipse-symphony/symphony/api/pkg/apis/v1alpha1/managers/staging.(*StagingManager).Poll:73","instance":"symphony-api-7c4fcb8f85-7tjq4","level":"debug","msg":" M (Staging): Polling...","scope":"coa.runtime","time":"2025-01-16T02:15:09.126592921Z","type":"log","ver":"0.48.33"}
